---
id: UT-PLAN-001
title: 単体テスト統括計画 001
doc_type: 単体テスト計画
phase: UT
version: 1.0.5
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-20'
up:
- '[[BD-DEV-TEST-001]]'
- '[[DD-APP-API-001]]'
related:
- '[[UT-PLAN-002]]'
- '[[UT-PLAN-003]]'
- '[[UT-PLAN-004]]'
- '[[UT-PLAN-005]]'
- '[[IT-PLAN-001]]'
tags:
- diopside
- UT
- PLAN
---


## テスト目的
- 単体テスト方針を領域（ドキュメント/インフラ/フロントエンド/バックエンド）ごとに分割し、責務と実行入口を明確化する。
- 統括計画として領域別UT計画の接続を管理し、変更時の回帰確認漏れを防止する。

## 観点
- 領域別に「対象」「判定基準」「実行コマンド」「完了条件」を独立管理する。
- 実行順は `DOC -> INF -> FE -> BE` を標準とし、上位依存の失敗を早期に検出する。

## テスト設計（観点・技法）
- 仕様ベース技法（同値分割/境界値分析/状態遷移）は FE/BE の入力検証・状態制御に優先適用する。
- 構造ベース技法（分岐網羅・条件網羅）は BEロジックとINFの判定分岐に適用し、[[UT-COV-001]] の閾値で監視する。
- 経験ベース技法（エラー推測）は過去障害・インシデント起点で補完し、再発防止ケースを領域別UTへ追加する。
- UTで停止させる失敗は「入力検証不備」「契約逸脱の局所起因」「境界条件の破綻」とし、ITへ欠陥を持ち越さない。

## 領域別UT計画
- [[UT-PLAN-002]]: ドキュメント領域（リンク整合、frontmatter整合、運用タスク実行）
- [[UT-PLAN-003]]: インフラ領域（CDK Construct/Functionの単体、Jest、synth前提品質）
- [[UT-PLAN-004]]: フロントエンド領域（表示ロジック、検索/絞り込み、状態遷移の単体）
- [[UT-PLAN-005]]: バックエンド領域（API契約、入力検証、エラー応答、運用API）

## 実行方針
- ドキュメントは `task docs:guard` を必須入口とし、`reports/doc_check.md` の `broken_links: 0` を維持する。
- インフラは `npm --prefix infra run test` を最小単位として、必要時に `npm --prefix infra run build` を追従実行する。
- フロントエンドは `npm --prefix web run test` を基本とし、検索/表示ロジック変更時は `npm --prefix web run build` まで確認する。
- バックエンドは [[UT-PLAN-005]] のAPI契約ケースを基準に、変更APIのみ再実行できる構成を維持する。

## 完了条件
- 4領域のUT計画が存在し、各計画が少なくとも1件以上のUTケースまたは対象範囲定義へ接続している。
- 領域別実行結果がIT計画（[[IT-PLAN-001]]）へ引き渡せる粒度で記録される。
- 設計変更時は、影響領域のUT計画/UTケースを同一変更で更新する。

## 変更履歴
- 2026-02-20: テスト章再編に合わせ、UTの設計観点・技法・UTで停止すべき失敗境界を追記
- 2026-02-11: 領域分割（DOC/INF/FE/BE）の統括計画へ再編し、[[UT-PLAN-002]]〜[[UT-PLAN-005]]を追加
- 2026-02-11: API参照ID（DD-API系）をObsidianリンクへ統一
- 2026-02-10: 新規作成
- 2026-02-10: [[DD-APP-API-002]]〜[[DD-APP-API-009]]に合わせてUTケースをAPI単位に再編
