---
id: AT-SCN-002
title: 検索絞り込みシナリオ
doc_type: 受入テストシナリオ
phase: AT
version: 1.0.4
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-13'
up:
- '[[BD-TST-001]]'
- '[[IT-PLAN-001]]'
related:
- '[[AT-GO-001]]'
- '[[DD-API-005]]'
- '[[DD-API-006]]'
- '[[RQ-UX-006]]'
- '[[RQ-UX-007]]'
- '[[RQ-UX-012]]'
- '[[RQ-UX-017]]'
tags:
- diopside
- AT
- SCN
---

## シナリオ目的
- キーワード、タグ、日付、再生時間、並び順の複合条件で目的動画へ到達できることを確認する。

## 対応DD-API
- `DD-API-005`（[[RQ-GL-005|タグ辞書]]配信契約）
- `DD-API-006`（検索契約）

## 前提条件
- `tag_master.json` と `archive_index` が取得可能。
- 検索対象データに公式投稿・[[RQ-GL-004|出演動画]]が混在している。

## 手順
1. キーワードに「雑談」等を入力する。
2. タグフィルタでカテゴリを開き、任意タグを選択する。
3. 日付範囲を設定する。
4. 再生時間レンジを設定する。
5. 並び順を新しい順/古い順で切り替える。
6. キーボードのみで検索入力、フィルタ開閉、適用、モーダル遷移、一覧復帰が完結できることを確認する。
7. フォーカスインジケータが常時視認でき、固定要素で隠れないことを確認する。
8. 入力エラー（例: 日付範囲逆転）を発生させ、項目特定・原因・修正方法が表示され、読み上げ通知されることを確認する。
9. 検索結果更新/0件/失敗の各状態で `role="status"` または `aria-live` による状態通知が行われることを確認する。

## 期待結果
- 条件変更ごとに件数表示が更新される。
- 複合条件適用後の結果が0件でない（対象データがある場合）。
- 並び順切替で先頭動画が変化する。
- キーボード操作時にフォーカス順序が視覚順/機能順と一致する。
- フォーカス可視化が維持され、主要操作のフォーカス非遮蔽が成立する。
- 入力エラー時に項目別エラーメッセージと修正導線が提示され、再試行可能である。
- 状態通知が読み上げ環境で取得でき、通知中も操作を継続できる。

## 判定基準対応
- 機能判定: Must FR（検索/絞り込み）Pass。
- 非機能判定: 主要操作の応答が許容範囲内。
- 非機能判定: [[RQ-UX-006]]/[[RQ-UX-007]]/[[RQ-UX-012]]/[[RQ-UX-017]] の受入観点を満たす。

## 記録項目
- 入力した[[RQ-GL-014|検索条件]]
- 結果件数
- 先頭動画ID（desc/asc）
- 対応DD-API（`DD-API-005`, `DD-API-006`）
- 判定（Pass/Fail）

## 変更履歴
- 2026-02-13: アクセシビリティ受入観点（キーボード/フォーカス/入力エラー通知/status通知）を追加
- 2026-02-10: 新規作成
- 2026-02-10: AT-PLAN-001の判定基準に合わせて複合検索手順を具体化
- 2026-02-10: 対応DD-API番号を明示
