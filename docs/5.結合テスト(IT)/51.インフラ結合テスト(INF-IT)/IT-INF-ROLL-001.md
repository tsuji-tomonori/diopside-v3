---
id: IT-INF-ROLL-001
title: ロールバック/再適用テスト
doc_type: 結合テストケース
phase: IT
version: 1.0.1
status: 下書き
owner: RQ-SH-001
created: 2026-02-13
updated: '2026-02-13'
up:
- '[[IT-PLAN-001]]'
- '[[DD-IAC-002]]'
related:
- '[[DD-CICD-INF-001]]'
- '[[BD-INF-007]]'
tags:
- diopside
- IT
- INF
---

## 目的
- 失敗時のロールバックと再適用が安全に実行できることを確認する。

## 手順
1. 破壊的差分を含むテスト変更を適用し、意図的に失敗を発生させる。
2. 自動ロールバックを実行し、主要経路の復旧を確認する。
3. 原因修正後に同一artifactで再適用し、再現性を確認する。
4. 監視指標（可用率、5xx率、通知遅延）の回復を確認する。

## 証跡項目
- 失敗トリガー、ロールバック開始/完了時刻、復旧判定時刻。
- 再適用artifact ID、差分一致判定結果、復旧後メトリクス。

## 失敗時判定
- ロールバック完了まで15分を超えた場合はNG。
- 再適用後に差分不一致が発生した場合はNG。
- 復旧後10分以内に5xx率<1%へ戻らない場合はNG。

## 期待結果
- ロールバック後にサービスが復帰し、再適用で再現可能な状態を維持する。

## 変更履歴
- 2026-02-13: 手順、証跡項目、失敗時判定を追加
- 2026-02-13: 新規作成
