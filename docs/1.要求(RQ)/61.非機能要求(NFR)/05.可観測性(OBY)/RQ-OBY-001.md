---
id: RQ-OBY-001
title: 可観測性要件
doc_type: 非機能要求
phase: RQ
version: 1.0.3
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-11'
up:
- '[[RQ-SC-001]]'
related:
- '[[RQ-RDR-023]]'
- '[[RQ-RDR-017]]'
- '[[BD-QUAL-001]]'
- '[[BD-MON-001]]'
- '[[DD-LOG-001]]'
tags:
- diopside
- RQ
- OBY
---


## SnowCard（日本語）
- 要求ID: RQ-OBY-001
- 種別: 非機能要求
- 優先度: MUST
- 要求: 本システムは、収集・配信・検索の状態を追跡可能なログ/メトリクス/アラートを提供すること。
- 根拠: [[RQ-GL-011|再収集]]判断と障害切り分けを短時間で行うため、運用観測点の欠落を防ぐ必要があるため。
- 受入基準:
  - [[RQ-GL-002|収集ジョブ]]実行ごとに `run_id`、開始/終了時刻、対象件数、成功件数、失敗件数を必須記録する。
  - 検索APIはステータスコード、応答時間、[[RQ-GL-014|検索条件]]種別を 95%以上のリクエストで記録する。
  - 重大障害（連続失敗3回、可用率閾値未達）のアラート通知を 5分以内に発報する。
  - ログ保存期間は 90日以上とし、直近30日分は即時検索可能である。
  - ログ保持は 0-30日を即時検索層、31-90日を低コスト保管層とし、監視費用は [[RQ-COST-001]] の月額上限内で運用する。
- 例外/エラー:
  - ログ出力失敗時はメトリクスで欠落件数を記録し、欠落率が1%を超えたら運用障害として扱う。
  - 監視基盤停止時は復旧後に欠測時間帯をレポートへ明記する。
- 依存・関連:
  - [[RQ-RDR-017]]
  - [[BD-QUAL-001]]
  - [[DD-LOG-001]]

## 変更履歴
- 2026-02-10: 新規作成
- 2026-02-11: ログ必須項目/通知時間/保存期間の受入閾値を追加し、テンプレート記述を具体化
- 2026-02-11: コスト上限制約と両立するログ保持運用を明確化
