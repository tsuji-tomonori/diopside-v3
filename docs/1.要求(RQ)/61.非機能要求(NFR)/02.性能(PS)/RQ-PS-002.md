---
id: RQ-PS-002
title: バッチ処理完了時間
doc_type: 非機能要求
phase: RQ
version: 1.0.0
status: 下書き
owner: RQ-SH-001
created: 2026-02-16
updated: '2026-02-16'
up:
- '[[RQ-SC-001]]'
related:
- '[[RQ-PS-001]]'
- '[[RQ-AV-004]]'
- '[[RQ-COST-001]]'
tags:
- diopside
- RQ
- PS
---


## SnowCard（日本語）
- 要求ID: RQ-PS-002
- 種別: 非機能要求
- 優先度: SHOULD
- 要求: 本システムの収集バッチは30分以内に完了し、Lambda実行時間上限を考慮した安全停止機構を備えること。
- 根拠: Lambda 15分上限の制約下で収集完了を保証し、タイムアウトによるデータ不整合を防止するため。
- 受入基準:
  - 通常運用時の収集バッチ全体の処理時間が30分以内に完了する。
  - 個別Lambda関数の実行時間がLambda上限（15分）の80%（12分）を超過した場合、途中結果を保存して安全停止する。
  - 安全停止後の再実行で、[[RQ-DATA-002]] の冪等性により未処理分のみを継続処理できる。
  - バッチ処理時間を [[RQ-OBY-001]] のメトリクスとして記録する。
- 例外/エラー:
  - 対象動画数の急増（通常の3倍以上）で30分を超過する場合は、分割実行を許容し、全分割の合計が60分以内であることを条件とする。
  - 安全停止が作動した場合は、次回スケジュール実行で自動的に継続処理される。
- 依存・関連:
  - [[RQ-PS-001]]
  - [[RQ-AV-004]]
  - [[RQ-DATA-002]]
  - [[RQ-COST-001]]

## 変更履歴
- 2026-02-16: 新規作成
