---
id: RQ-RDR-045
title: 参照テンプレートNFRからの移植対象選定と不採用理由の記録
doc_type: 要求決定記録
phase: RQ
version: 1.0.1
status: 下書き
owner: RQ-SH-001
created: 2026-02-16
updated: '2026-02-19'
up:
  - '[[RQ-SC-001]]'
related:
  - '[[RQ-AV-001]]'
  - '[[RQ-AV-002]]'
  - '[[RQ-AV-003]]'
  - '[[RQ-AV-004]]'
  - '[[RQ-PS-001]]'
  - '[[RQ-PS-002]]'
  - '[[RQ-PS-003]]'
  - '[[RQ-SEC-001]]'
  - '[[RQ-SEC-002]]'
  - '[[RQ-SEC-003]]'
  - '[[RQ-SEC-004]]'
  - '[[RQ-PRC-001]]'
  - '[[RQ-OBY-001]]'
  - '[[RQ-OBY-002]]'
  - '[[RQ-OBY-003]]'
  - '[[RQ-DEV-001]]'
  - '[[RQ-DEV-003]]'
  - '[[RQ-DEV-004]]'
  - '[[RQ-INT-001]]'
  - '[[RQ-INT-002]]'
  - '[[RQ-COST-001]]'
  - '[[RQ-COST-002]]'
  - '[[RQ-COST-003]]'
  - '[[RQ-DATA-001]]'
  - '[[RQ-DATA-002]]'
  - '[[RQ-DATA-003]]'
  - '[[RQ-SUS-001]]'
  - '[[RQ-SUS-002]]'
  - '[[RQ-PC-006]]'
tags:
  - diopside
  - RQ
  - RDR
---

## 決定事項
- 参照テンプレート（cornellnoteweb）の11カテゴリ139件のNFRから、[[RQ-GL-001|diopside]]-v3のプロジェクト特性に合致する19件を選定し移植した。
- 残りの要件は、以下の判断基準に基づき不採用とした。
- 不採用要件は将来のプロジェクト規模拡大時に再評価対象とし、本RDRを判断根拠の正本とする。

### 判断基準
1. **アーキテクチャ不適合**: サーバーレス＋静的JSON配信構成で本質的に不要、またはマネージドサービスが標準で充足する。
2. **予算制約**: [[RQ-PC-006]] の月額3,000円上限で実現不可能、またはコスト対効果が著しく低い。
3. **規模不適合**: 個人運用・単一サービスの規模に対して運用オーバーヘッドが過大。
4. **既存要件で充足**: 既存NFRの受入基準が実質的に同等の統制を提供済み。

## 理由
- 参照テンプレートは中〜大規模Webアプリケーションを想定しており、全件採用は過剰設計となる。
- [[RQ-GL-001|diopside]]-v3は個人運用・サーバーレス・PII無し・静的配信という特殊制約を持ち、費用対効果の観点で選別が必須である。

## 不採用要件の詳細

### 01.可用性(AV) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| 冗長化（マルチAZ/マルチリージョン） | CloudFront+S3は標準でマルチAZ冗長。マルチリージョンは [[RQ-PC-006]] の予算制約で実現不可 | アーキテクチャ不適合＋予算制約 |
| 自動フェイルオーバー | CloudFront+S3のマネージドフェイルオーバーが標準で動作。追加構成不要 | アーキテクチャ不適合 |
| DR訓練（災害復旧訓練） | マルチリージョン構成を持たないため、DR訓練の対象構成が存在しない。[[RQ-AV-003]] の年次リストア検証で代替 | アーキテクチャ不適合＋規模不適合 |

### 02.性能(PS) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| スループット要件（同時接続数/TPS） | CloudFront+S3は自動スケールし、想定利用規模（同時10未満）で律速しない | アーキテクチャ不適合 |
| オートスケーリングポリシー | Lambda・CloudFront・S3・DynamoDBは全てマネージドスケール。スケーリング設計不要 | アーキテクチャ不適合 |
| レートリミット/スロットリング | 利用者向けAPIを公開せず、管理APIは認証必須。レートリミットの追加統制は過剰 | アーキテクチャ不適合＋規模不適合 |
| DB性能チューニング（インデックス/クエリ最適化） | RDB不使用。DynamoDBはパーティションキー設計のみで性能確保 | アーキテクチャ不適合 |
| CDN最適化 | CloudFrontの標準キャッシュ設定で十分。[[RQ-SUS-002]] のCache-Control設定で実質充足 | 既存要件で充足 |

### 03.セキュリティ(SEC) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| MFA/多要素認証 | ユーザーアカウント機能を持たない。管理者認証はAWS IAMのMFAで対応済み | アーキテクチャ不適合 |
| ネットワーク境界（VPC/セキュリティグループ） | Lambda・S3・DynamoDBはVPCレス運用。VPC設計は不要かつコスト増 | アーキテクチャ不適合＋予算制約 |
| WAF（Web Application Firewall） | AWS WAFの月額費用が [[RQ-PC-006]] の予算を圧迫。CloudFront標準のDDoS対策（Shield Standard）で代替 | 予算制約 |
| SBOM（ソフトウェア部品表） | 個人プロジェクト規模でSBOM管理の運用コストが効果に見合わない。[[RQ-SEC-001]] の脆弱性スキャンで実質充足 | 規模不適合 |
| セキュリティリスクアセスメント（定期監査） | 個人運用で形式的な監査体制は過剰。[[RQ-SEC-001]] の受入基準で継続的な統制を維持 | 規模不適合 |
| セッション管理/CSRF対策 | ユーザーセッションを持たない静的SPA配信。セッション攻撃の対象面が存在しない | アーキテクチャ不適合 |
| パスワードポリシー | ユーザーアカウント・パスワード認証を持たない | アーキテクチャ不適合 |

### 04.プライバシー(PRC) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| PIIマスキング/匿名化 | [[RQ-PRC-001]] でPII非保存を方針化済み。マスキング対象データが存在しない | 既存要件で充足 |
| 同意管理（Cookie同意/GDPR対応） | ユーザーアカウント無し、トラッキング無し、Cookie非使用。同意管理の対象が存在しない | アーキテクチャ不適合 |
| データ主体の権利（アクセス権/削除権） | 個人データを収集・保存しないため、データ主体の権利行使の対象が存在しない | アーキテクチャ不適合 |
| データ保護影響評価（DPIA） | PII無し・ユーザーアカウント無しのため、DPIA対象の処理活動が存在しない | アーキテクチャ不適合 |

### 05.可観測性(OBY) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| 分散トレーシング（X-Ray/OpenTelemetry） | マイクロサービス構成を持たない。Lambda単体のログで因果追跡が完結 | アーキテクチャ不適合 |
| エラーバジェット/SLO運用 | 個人運用でエラーバジェットの消費判断・凍結運用は過剰。[[RQ-AV-001]] の可用率閾値で代替 | 規模不適合 |
| RED/USEメトリクス体系 | マイクロサービス間のRate/Error/Duration計測対象が存在しない。CloudWatch標準メトリクスで充足 | アーキテクチャ不適合 |
| ダッシュボード（Grafana等） | CloudWatchコンソールの標準機能で十分。外部ツール導入は予算・運用コスト増 | 予算制約＋規模不適合 |
| インシデント管理プロセス（PagerDuty等） | 個人運用で外部インシデント管理ツールは過剰。SNS通知＋[[RQ-OBY-003]] のランブックで代替 | 規模不適合 |

### 06.DevOps(DEV) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| カナリアリリース/ブルーグリーンデプロイ | CloudFront+S3のアトミックデプロイ（invalidation）で安全な切替が可能。段階リリースの追加価値が低い | アーキテクチャ不適合 |
| 環境分離（dev/staging/prod） | [[RQ-PC-006]] の予算制約で複数環境の常時維持が困難。ローカル検証＋prod直接デプロイで運用 | 予算制約 |
| フィーチャーフラグ | 個人運用で機能の段階公開管理は過剰。直接デプロイで十分 | 規模不適合 |
| 変更承認プロセス（複数人レビュー） | 個人開発でレビュアーが不在。[[RQ-DEV-001]] のCI自動チェックで品質ゲートを代替 | 規模不適合 |

### 07.相互運用性(INT) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| OpenTelemetry/OTLP準拠 | 分散トレーシング不採用に連動。CloudWatch標準形式で充足 | アーキテクチャ不適合 |
| OCI/コンテナ標準準拠 | コンテナ技術を使用しない。Lambda＋S3のサーバーレス構成 | アーキテクチャ不適合 |
| データエクスポート/ポータビリティ | 配信成果物が静的JSONであり、それ自体がポータブルなエクスポート形式。追加のエクスポート機構は不要 | 既存要件で充足 |
| イベント駆動統合（EventBridge/SNS連携） | 現時点でイベント駆動の外部連携先が存在しない。将来必要時にADRで検討 | 規模不適合 |

### 08.料金(COST) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| 非本番環境のスケジュール停止 | サーバーレス構成でアイドルコストが発生しない。停止対象リソースが存在しない | アーキテクチャ不適合 |
| コスト異常検知（Cost Anomaly Detection） | [[RQ-COST-002]] のBudgetsアラートで段階検知が可能。Anomaly Detectionの追加価値が予算に見合わない | 予算制約＋既存要件で充足 |
| コストKPI（単位コスト指標等） | 個人プロジェクトで単位コスト分析は過剰。月額総額の閾値管理で十分 | 規模不適合 |
| リザーブドインスタンス/Savings Plans | オンデマンドのサーバーレスサービスのみ使用。予約購入の対象が存在しない | アーキテクチャ不適合 |

### 09.ユーザー体験(UX) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| 追加WCAG項目（AAA水準等） | 既存24件（[[RQ-UX-001]]〜024）でWCAG 2.2 AA水準を網羅済み。AAA水準は過剰 | 既存要件で充足 |
| ユーザビリティテスト（定期実施） | 個人運用で形式的なユーザビリティテスト体制は過剰。自己利用でのフィードバックで代替 | 規模不適合 |
| 多言語対応（i18n） | 日本語単一言語のプロジェクト。多言語対応の要件が存在しない | アーキテクチャ不適合 |

### 10.データ(DATA) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| SQL標準準拠/クエリ最適化 | RDBを使用しない。DynamoDBのキーアクセスパターンのみ | アーキテクチャ不適合 |
| DB監査ログ | DynamoDB標準のCloudTrailログで充足。追加の監査ログ基盤は不要 | 既存要件で充足 |
| DBポータビリティ（マイグレーション対応） | DynamoDB単一テーブル設計で、DB移行の計画が存在しない。将来必要時にADRで検討 | 規模不適合 |
| メッセージ重複排除（SQS/EventBridge） | メッセージキューを使用しない。[[RQ-DATA-002]] のバッチ冪等性で収集の重複を防止 | アーキテクチャ不適合＋既存要件で充足 |
| データリネージ/系統管理 | データパイプラインが単一（YouTube API→DynamoDB→S3 JSON）で系統が自明。追加管理は過剰 | 規模不適合 |

### 11.サステナビリティ(SUS) — 不採用要件

| 参照要件 | 不採用理由 | 判断基準 |
|---------|-----------|---------|
| サステナビリティKPI（カーボンフットプリント計測等） | 個人プロジェクト規模でカーボンKPIの計測・報告は過剰。AWSの標準カーボンダッシュボードで参考確認のみ | 規模不適合 |
| アイドル資源の自動排除 | [[RQ-SUS-001]] のサーバーレスファースト方針により、アイドル資源が構造的に発生しない | 既存要件で充足 |
| グリーンリージョン選択 | 東京リージョン（ap-northeast-1）をレイテンシ最適で選択済み。リージョン変更はレイテンシ劣化を招く | アーキテクチャ不適合 |

## 影響
- NFR文書: 19件を新規追加（MUST 7件、SHOULD 12件）。新規カテゴリ「11.サステナビリティ(SUS)」を新設。
- 既存NFR: 既存34件との内容重複・矛盾なし。
- 将来判断: プロジェクト規模拡大（マルチユーザー化、PII取扱、予算増額等）の際は、本RDRの不採用要件を再評価候補とする。

## 補足（2026-02-19）
- データ正本方針は [[RQ-RDR-046]] により「RDB正本」に統一した。
- 本書中でDynamoDB単独前提として記載した箇所は、当時の比較メモとして扱い、現行の設計判断は [[RQ-RDR-046]] を正本とする。

## 却下した選択肢
- 参照テンプレートの全139件を移植する案: 個人運用・月額3,000円・サーバーレス構成に対して著しく過剰であり、文書管理コストが実質的な品質向上を上回るため不採用。
- 移植を行わず既存34件のみで運用する案: バックアップ・暗号化・セキュリティヘッダー・冪等性等の実質的に価値のある要件が欠落し、運用リスクが残るため不採用。

## 変更履歴
- 2026-02-19: データ正本方針の補足を追加し、RDB統一判断への正本参照を明記 [[RQ-RDR-046]]
- 2026-02-16: 新規作成 [[RQ-RDR-045]]
