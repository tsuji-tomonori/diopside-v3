---
id: RQ-FR-005
title: タグ辞書を更新できる
doc_type: 機能要求
phase: RQ
version: 1.0.8
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-14'
up:
- '[[RQ-SC-001]]'
- '[[RQ-UC-001]]'
related:
- '[[RQ-RDR-034]]'
- '[[RQ-RDR-041]]'
- '[[BD-APP-API-001]]'
- '[[BD-APP-API-002]]'
- '[[BD-APP-UI-001]]'
bounded_context: TagManagement
subdomain: Core
tags:
- diopside
- RQ
- FR
---

## SnowCard（日本語）
- 要求ID: RQ-FR-005
- 種別: 機能要求
- 優先度: MUST
- 要求: [[RQ-SH-001|管理者]]が管理画面から[[RQ-GL-005|タグ辞書]]を追加・更新・無効化し、DB正本へ反映できること。
- 根拠: タグ運用ルールを収集処理から分離し、用語追加時の運用変更を迅速に反映するため。
- 受入基準:
  - [[RQ-GL-005|タグ辞書]]更新はBackend API経由でDB正本に保存される。
  - DB正本更新後、配信用 [[RQ-GL-008|タグマスター]] の再生成を起動できる。
  - 公開切替後の [[RQ-GL-008|タグマスター]] は更新内容を反映し、公開前版との差分を追跡できる。
  - 辞書エントリは有効/無効を切り替えて履歴管理できる。
- 例外/エラー:
  - 重複キーや禁止文字を含む辞書更新は拒否され、原因を返す。
  - 参照中エントリの削除要求は論理無効化に置き換える。
  - 配信再生成が失敗した場合は直前公開版を維持し、再試行導線を提供する。
- 依存・関連:
  - [[RQ-UC-001]]
  - [[RQ-FR-019]]
  - [[RQ-RDR-034]]
  - [[BD-APP-API-002]]

## 責務境界
- 本要求は、通常の[[RQ-GL-005|タグ辞書]]運用（追加・更新・無効化と公開切替）を対象とする。
- 配信前後再確認に伴うLLM支援JSON取込と反映は [[RQ-FR-019]] を正本とし、本要求では扱わない。

## テスト観点
- 辞書追加・更新・無効化の各操作がDB正本へ反映されること。
- 公開切替後に[[RQ-SH-002|利用者]]向け [[RQ-GL-008|タグマスター]] が更新内容を返すこと。
- 不正キー入力時に辞書を変更せず検証エラーのみ返すこと。

## 個別確認チェックリスト
- 確認主体: [[RQ-SH-001|管理者]]
- 重点確認対象: [[RQ-GL-005|タグ辞書]]の有効/無効履歴
- 確認方法: 辞書更新履歴と公開切替後の配信結果を確認する。

## 変更履歴
- 2026-02-14: 要求記述から具体ファイル名を除外し、用語リンク中心の記述へ統一 [[RQ-RDR-042]]
- 2026-02-14: SnowCardの要求記述をアクター目的主体へ統一し、`本システムは` 主体の表現を排除 [[RQ-RDR-041]]
- 2026-02-11: [[RQ-FR-019]] との責務境界（通常辞書運用と配信前後再確認運用の分離）を明記 [[RQ-RDR-034]]
- 2026-02-11: DB正本更新と配信用[[RQ-GL-008|タグマスター]]再生成の受入条件を追加 [[RQ-RDR-034]]
- 2026-02-11: 本文中の主体表現「[[RQ-SH-001|管理者]]/[[RQ-SH-002|利用者]]」をステークホルダーリンクへ統一 [[RQ-RDR-010]]
- 2026-02-11: 個別レビュー観点を明確化するため、個別確認チェックリストを追記 [[RQ-RDR-010]]
- 2026-02-11: 定型テンプレート文を廃止し、機能要求ごとの受入基準・例外・テスト観点へ具体化 [[RQ-RDR-034]]
- 2026-02-10: 新規作成 [[RQ-RDR-003]]
