---
id: RQ-FR-025
title: 管理画面運用の前提として単一CloudFrontで配信経路をパス分岐できる
doc_type: 機能要求
phase: RQ
version: 1.0.3
status: 下書き
owner: RQ-SH-001
created: 2026-02-11
updated: '2026-02-14'
up:
- '[[RQ-SC-001]]'
related:
- '[[RQ-RDR-026]]'
- '[[RQ-RDR-030]]'
- '[[RQ-DEV-001]]'
- '[[RQ-SEC-001]]'
- '[[RQ-INT-001]]'
- '[[BD-INF-DEP-004]]'
- '[[BD-APP-API-004]]'
- '[[AT-SCN-006]]'
bounded_context: Administration
subdomain: Supporting
tags:
- diopside
- RQ
- FR
---

## SnowCard（日本語）
- 要求ID: RQ-FR-025
- 種別: 機能要求
- 優先度: MUST
- 要求: 本システムは、管理画面運用の配信前提として、単一CloudFront Distribution上で `/web/*`（画面）、`/docs/*`（ドキュメント）、`/openapi/*`（OpenAPI）、`/api/v1/*`（業務API）をパスで分岐し、干渉なく配信できることを提供する。
- 根拠: 配信入口を単一化しつつ責務境界を固定し、運用負荷と経路競合リスクを抑えるため。
- 受入基準:
  - `/` アクセス時に `/web/` へ誘導される。
  - `/docs/*` のみ拡張子補完リライトを適用し、`/api/v1/*` と `/openapi/*` には適用しない。
  - `/api/v1/*` と `/openapi/*` は未認証アクセスを拒否し、認証済みアクセスのみ許可する。
  - OpenAPI仕様は `/openapi/v1/*` で取得でき、`/api/v1/*` と版対応が一致する。
- 例外/エラー:
  - Behavior優先順位競合で誤配信を検知した場合は、配信を停止し直前設定へ切り戻す。
  - 認証連携障害時は `/api/v1/*` と `/openapi/*` を保護優先で閉塞し、復旧後に再開する。
- 依存・関連:
  - [[RQ-RDR-026]]
  - [[RQ-DEV-001]]
  - [[RQ-SEC-001]]
  - [[RQ-INT-001]]

## テスト観点
- `/web/*` 深いパス直叩き時に画面表示が継続すること。
- `/docs/*` の拡張子なしパスで文書表示できること。
- `/api/v1/*` と `/openapi/*` の未認証アクセスが拒否されること。

## 個別確認チェックリスト
- 確認主体: [[RQ-SH-001|管理者]]
- 重点確認対象: パス分岐境界と認証境界
- 確認方法: CloudFront behavior設定、認証有無アクセス結果、版対応URLを照合する。

## 変更履歴
- 2026-02-14: 要求記述から具体ファイル名を除外し、公開経路レベルの記述へ統一 [[RQ-RDR-042]]
- 2026-02-11: 管理画面機能カテゴリ（ADM）へ再配置し、要求本文を管理画面運用前提へ統一 [[RQ-RDR-030]]
- 2026-02-11: 本文中の主体表現「管理者/利用者」をステークホルダーリンクへ統一 [[RQ-RDR-010]]
- 2026-02-11: 新規作成 [[RQ-RDR-026]]
