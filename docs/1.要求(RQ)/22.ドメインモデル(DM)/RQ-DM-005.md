---
id: RQ-DM-005
title: 収集実行エンティティ
doc_type: ドメインモデル
phase: RQ
version: 1.0.4
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-22'
up:
- '[[RQ-SC-001]]'
related: []
tags:
- diopside
- RQ
- DM
---


## モデルの目的
- [[RQ-GL-002|収集実行]]エンティティは、1回の[[RQ-GL-002|収集実行]]を業務上の実行単位として表す。

## 集約境界/集約ルート
- 集約名: [[RQ-GL-002|収集実行]]集約
- 集約ルート: [[RQ-GL-002|収集実行]]エンティティ（[[RQ-DM-005]]）
- 境界に含む要素: 実行モード、対象区分、実行状態、時刻情報、結果要約、[[RQ-GL-011|再収集]]起点、収集イベント（[[RQ-DM-006]]）
- 境界外との契約: 動画集約（[[RQ-DM-001]]）・[[RQ-GL-005|タグ辞書]]集約（[[RQ-DM-004]]）・[[RQ-GL-006|アーカイブ索引カタログ]]集約（[[RQ-DM-007]]）へ実行IDと結果サマリを公開し、各集約の業務状態は直接更新しない

## 要素・属性
- 実行モード（手動実行/定期実行）と対象区分（[[RQ-GL-003|公式投稿動画]]/[[RQ-GL-004|出演動画]]）を持つ。
- 実行状態（受付済み、実行中、成功、失敗、中止など）を持つ。
- 受付時刻、開始時刻、終了時刻など、進行の節目を表す情報を持つ。
- 処理件数、成功件数、失敗件数など、結果要約を持つ。
- [[RQ-GL-011|再収集]]時は「どの実行を起点に再実行したか」を示す情報を持つ。

## 制約・業務ルール
- 実行状態は定義された進行順序で遷移し、矛盾する状態を許容しないこと。
- 失敗実行からの[[RQ-GL-011|再収集]]は、元実行との関係を失わずに辿れること。
- 同一目的の重複実行は運用ルールに沿って抑止または区別できること。
- 動画・タグ・収集イベントが、どの実行結果に基づくかを説明できること。

## 関連
- [[RQ-DM-006|収集イベントエンティティ]]（[[RQ-DM-006]]）と関連し、実行中に起きた事象を束ねる。
- [[RQ-DM-001|動画エンティティ]]（[[RQ-DM-001]]）、[[RQ-DM-002|チャンネルエンティティ]]（[[RQ-DM-002]]）、[[RQ-DM-003|タグエンティティ]]（[[RQ-DM-003]]）と関連し、データ更新の起点となる。
- [[RQ-GL-014|検索条件]]モデル（[[RQ-DM-007]]）と関連し、検索結果の評価時点を説明する。

## 変更履歴
- 2026-02-14: GL-002参照を「[[RQ-GL-002|収集実行]]」へ統一し、[[RQ-GL-002|収集実行]]集約の集約境界/集約ルートを明記 [[RQ-RDR-040]]
- 2026-02-10: 関連節の文書ID参照をObsidianリンクへ統一 [[RQ-RDR-040]]
- 2026-02-10: ドメイン目線へ再整理（要素・制約・関連を日本語で再記述、実装寄り項目を削除） [[RQ-RDR-040]]
- 2026-02-10: モデル定義を具体化（run属性、自己参照、状態遷移条件を追加） [[RQ-RDR-040]]
- 2026-02-10: 新規作成 [[RQ-RDR-040]]
