---
id: RQ-GL-015
title: 盛り上がり区間
term_en: highlight_segment
doc_type: 用語
phase: RQ
version: 1.1.0
status: 下書き
owner: RQ-SH-001
created: 2026-02-11
updated: '2026-02-12'
up:
- '[[RQ-SC-001]]'
related:
- '[[RQ-FR-020]]'
- '[[RQ-FR-022]]'
- '[[RQ-DM-008]]'
tags:
- diopside
- RQ
- GL
---

## 定義
| 項目 | 内容 |
|---|---|
| 用語ID | `RQ-GL-015` |
| 用語名 | [[RQ-GL-015|盛り上がり区間]] |
| 英名 | `highlight_segment` |
| 定義 | コメント密度が相対的に高いと判定された連続時間区間。動画詳細で見どころ導線として表示し、クリック時に該当秒へ遷移する単位。 |
| 判定条件/適用範囲 | 動画詳細のコメント密度可視化で、区間の開始秒・終了秒・密度指標・コメント件数を持つ表示/遷移単位として適用する。 |

## 判定アルゴリズム
1. 動画全体を固定幅（30秒）のウィンドウに分割する。
2. 各ウィンドウ内のコメント件数を集計する。
3. 全ウィンドウの平均コメント件数（μ）と標準偏差（σ）を算出する。
4. コメント件数が `μ + 1.5σ` を超過するウィンドウを「高密度ウィンドウ」と判定する。
5. 連続する高密度ウィンドウを1つの[[RQ-GL-015|盛り上がり区間]]として統合する。
6. 統合後、区間長が10秒未満の場合は除外する。
7. 最大5区間まで抽出し、密度指標の降順でソートする。

## 出力仕様
| フィールド | 型 | 説明 |
|-----------|-----|------|
| `startSec` | number | 区間開始秒（整数） |
| `endSec` | number | 区間終了秒（整数） |
| `density` | number | 密度指標（コメント件数/秒、小数第2位まで） |
| `commentCount` | number | 区間内コメント総件数 |

## 利用ルール
- 区間は `開始秒 < 終了秒` を満たすこと。
- 区間クリック時の遷移秒は開始秒を用いる。
- 複数区間がある場合、密度指標の高い順に表示する。
- 区間が0件の場合（コメントなし動画）、波形UIは「データなし」を表示する。
- 文書・実装・テストで同じ意味で使用する。

## パラメータ設定値
| パラメータ | 設定値 | 変更時の影響 |
|-----------|-------|-------------|
| ウィンドウ幅 | 30秒 | 小さいほど細かい区間を検出 |
| 閾値係数 | 1.5σ | 大きいほど厳選された区間のみ抽出 |
| 最小区間長 | 10秒 | 小さいほど短い区間も許容 |
| 最大区間数 | 5件 | 表示UI上限との整合 |

## 変更履歴
- 2026-02-12: 判定アルゴリズムとパラメータ設定値を追加 [[RQ-RDR-037]]
- 2026-02-11: 新規作成
