---
id: BD-TST-001
title: テスト戦略
doc_type: テスト戦略
phase: BD
version: 1.0.3
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-13'
up:
- '[[RQ-SC-001]]'
- '[[RQ-FR-001]]'
related:
- '[[BD-ADR-001]]'
- '[[BD-ADR-026]]'
- '[[UT-PLAN-001]]'
- '[[IT-PLAN-001]]'
- '[[AT-PLAN-001]]'
- '[[BD-INF-001]]'
- '[[BD-ADR-028]]'
tags:
- diopside
- BD
- TST
---


## 設計方針
- [[RQ-GL-001|diopside]] のテスト戦略は、単体テスト（UT）/結合テスト（IT）/受入テスト（AT）の3層で構成する。
- 各層は「責務境界」と「判定粒度」を分離し、上位層ほど利用者価値と運用可否の判定へ寄せる。
- 収集対象（公式投稿 + [[RQ-GL-004|出演動画]]）を前提に、機能と運用の双方をGo/No-Go判定へ接続する。

## テストレベル別責務
- UT（[[UT-PLAN-001]]）: モジュール/API単位のロジック、入力検証、エラー応答、前提制約を最小単位で検証する。
- IT（[[IT-PLAN-001]]）: API契約、データ連携順序、外部連携境界、障害時復旧導線の一貫性を検証する。
- AT（[[AT-PLAN-001]]）: 利用者導線（検索到達性）と運用品質（収集継続性）を最終判定し、リリース可否を決定する。

## インフラ試験レイヤ
- UT-INF: IaC lint/policy/security scan（[[UT-IAC-001]], [[UT-POL-001]], [[UT-SEC-001]]）。
- IT-INF: ephemeral構築、ネットワーク到達性、監視流入、ロールバック（[[IT-INF-ENV-001]], [[IT-INF-NET-001]], [[IT-INF-OBS-001]], [[IT-INF-ROLL-001]]）。
- AT-INF: 運用受入、DR演習、SLO受入（[[AT-OPS-INF-001]], [[AT-DR-001]], [[AT-SLO-001]]）。

## レベル間接続（エントリ/完了条件）
- UT完了条件: 変更影響範囲のUTがPassし、失敗時の原因が局所化できること。
- ITエントリ条件: UT完了報告があり、対象API契約とテストデータが固定されていること。
- IT完了条件: 主要APIケースがPassし、障害系で復旧導線が確認できること。
- ATエントリ条件: IT完了報告（[[IT-RST-001]]）が提出され、受入環境/データセットが凍結されていること。
- AT完了条件: Must要求の[[RQ-GL-012|受入判定]]が成立し、[[AT-GO-001]] のGo/No-Go入力が記録済みであること。

## 品質ゲート
- Gate 1（UT）: 失敗が残る場合はITへ進めない。
- Gate 2（IT）: 契約不整合または復旧不能な障害系Failがある場合はATへ進めない。
- Gate 3（AT）: Must要求未達、重大障害未解消、運用判定未記録のいずれかがある場合はNo-Goとする。
- 再実行方針: Fail時は原因層へ戻して再実行し、同一障害の再発有無を次層移行前に確認する。

## 要求保証マトリクス（簡易）
| 要求カテゴリ | 主な要求 | 主要検証層 | 最終保証層 |
| --- | --- | --- | --- |
| 管理画面運用機能 | [[RQ-FR-001]] | UT -> IT | AT |
| 参照系機能（一覧/検索/詳細） | [[RQ-FR-001]] | UT -> IT | AT |
| 非機能（可用性/性能/可観測性） | [[RQ-AV-001]], [[RQ-PS-001]], [[RQ-OBY-001]] | IT | AT |
| 運用継続性（失敗検知/[[RQ-GL-011|再収集]]） | [[RQ-FR-001]] | IT | AT |

## 運用要点
- テスト実行結果はUT/IT/AT各計画の成果物へ記録し、判定時に相互参照できる状態を維持する。
- 設計または要求の意味変更時は、影響層（UT/IT/AT）の計画・ケース・報告を同一変更で更新する。
- 変更影響は `reports/impact_check_YYYY-MM-DD.md` に記録し、判定根拠の追跡性を維持する。

## 変更履歴
- 2026-02-13: インフラ試験レイヤ（UT-INF/IT-INF/AT-INF）を追加 [[BD-ADR-028]]
- 2026-02-11: UT/IT/AT三層の責務境界、品質ゲート、要求保証マトリクスを追加 [[BD-ADR-026]]
- 2026-02-10: 新規作成 [[BD-ADR-001]]
