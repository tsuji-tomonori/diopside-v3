---
id: BD-SYS-ADR-009
title: ワードクラウドは事前生成の静的画像配信を採用する
doc_type: アーキテクチャ決定記録
phase: BD
version: 1.0.0
status: 下書き
owner: RQ-SH-001
created: 2026-02-11
updated: '2026-02-11'
up:
- '[[RQ-RDR-021]]'
related:
- '[[RQ-FR-021]]'
- '[[BD-APP-API-001]]'
- '[[BD-APP-UI-002]]'
- '[[BD-APP-UI-004]]'
tags:
- diopside
- BD
- ADR
---

## 決定事項
- 動画詳細の[[RQ-GL-017|ワードクラウド]]表示は、動的生成APIではなく事前生成済みPNGの静的配信を採用する。
- 配信契約は `wordcloud/{videoId}.png` とし、クライアントが動画IDから取得先を決定する。
- 画像未生成・取得失敗・破損時は、[[DD-APP-UI-004|詳細モーダル]]内で代替表示と再試行導線を提供する。

## 理由
- 現行アーキテクチャ（静的JSON + フロント検索）と整合し、運用コストと障害点を増やさずに [[RQ-FR-021]] を実現できる。
- 過去POC（`.workspace/CreateWordCloudService`）で画像生成処理の成立性が確認できている。
- [[RQ-PC-003]] / [[RQ-PRC-001]] の制約に合わせ、生チャット保持を避けた派生物配信へ責務を限定できる。

## 影響
- API設計: [[BD-APP-API-001]] に静的画像配信契約、HTTPステータス運用、フォールバック方針を追加する。
- UI設計: [[BD-APP-UI-002]] に表示位置・状態遷移・再試行導線を追加する。
- アクセシビリティ: [[BD-APP-UI-004]] に代替テキスト・状態通知・キーボード操作要件を追加する。

## 却下した選択肢
- 動的生成API方式: リクエスト時CPU負荷、処理時間ばらつき、障害時影響範囲が増えるためMVPでは不採用。
- チャット本文の直接表示方式: プライバシー制約とスコープ制約に反するため不採用。

## 変更履歴
- 2026-02-11: 新規作成
