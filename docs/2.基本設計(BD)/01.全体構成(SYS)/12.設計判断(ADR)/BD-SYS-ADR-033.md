---
id: BD-SYS-ADR-033
title: 論理構成を4区分化しバックエンド処理形態を分離する
doc_type: アーキテクチャ決定記録
phase: BD
version: 1.0.0
status: 下書き
owner: RQ-SH-001
created: 2026-02-15
updated: '2026-02-15'
up:
- '[[RQ-RDR-034]]'
related:
- '[[BD-SYS-ARCH-001]]'
- '[[BD-SYS-ARCH-002]]'
- '[[BD-SYS-ADR-021]]'
- '[[BD-APP-API-001]]'
- '[[BD-APP-API-002]]'
tags:
- diopside
- BD
- ADR
---

## 決定事項
- 基本設計の[[BD-SYS-ARCH-002|論理構成]]を `フロントエンド` `バックエンド` `インフラ` `データベース` の4区分で明示する。
- バックエンド内部は `リアルタイムAPI` と `バッチ処理` に分離し、同一Backend API（Hono）内で論理責務を分けて扱う。
- リアルタイムAPIは運用要求の受付・検証・run起票を担い、バッチ処理は収集/再確認/公開反映の実処理を担う。

## 理由
- 従来の「更新系/配信生成系/参照系」表現では、レビュー観点で求められたレイヤ分割（FE/BE/INF/DB）が文書上で判読しづらい。
- バックエンドを単一記述にすると、同期応答責務（API）と非同期実行責務（バッチ）の境界が不明瞭になり、運用設計や[[BD-INF-MON-001|監視設計]]への連携が弱くなる。
- 4区分化と処理形態分離を同時に明文化することで、基本設計の[[BD-SYS-ARCH-002|論理構成]]と実行境界を一貫して説明できる。

## 影響
- `[[BD-SYS-ARCH-002]]` を[[BD-SYS-ARCH-002|論理構成]]正本として更新し、4区分とバックエンド内部構成を本文/図で明示する。
- `[[BD-SYS-ARCH-001]]` に[[BD-SYS-ARCH-002|論理構成]]参照を追加し、[[BD-SYS-ARCH-001|システムコンテキスト]]から正本へ辿れるようにする。
- API/バッチの起動契約・詳細仕様の正本は既存どおり `[[BD-APP-API-002]]` を維持し、本ADRでは構成原則のみを固定する。

## トレードオフ
- 区分を増やすことで図と本文の記載量は増える。
- 一方で、レビュー時の読み取り容易性と工程間トレーサビリティ（BD->DD->IT/AT）が向上する。

## 却下した選択肢
- 既存の3分類のみを維持する案: レイヤ分割要求とバックエンド内部区分要求を満たしきれないため不採用。
- バックエンドをAPI/バッチで物理分割前提にする案: 現行の単一Backend API（Hono）方針と矛盾するため不採用。

## 変更履歴
- 2026-02-15: 新規作成（[[BD-SYS-ARCH-002|論理構成]]4区分化とバックエンド処理形態分離の判断を記録） [[BD-SYS-ADR-033]]
