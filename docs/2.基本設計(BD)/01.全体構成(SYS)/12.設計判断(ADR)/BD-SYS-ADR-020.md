---
id: BD-SYS-ADR-020
title: 非機能詳細設計の判定軸を統一する
doc_type: アーキテクチャ決定記録
phase: BD
version: 1.0.0
status: 下書き
owner: RQ-SH-001
created: 2026-02-11
updated: '2026-02-11'
up:
- '[[RQ-RDR-023]]'
related:
- '[[RQ-SEC-001]]'
- '[[RQ-OBY-001]]'
- '[[RQ-PS-001]]'
- '[[RQ-AV-001]]'
- '[[RQ-DATA-001]]'
- '[[DD-SYS-SEC-001]]'
- '[[DD-APP-ERR-001]]'
- '[[DD-APP-LOG-001]]'
- '[[DD-SYS-PERF-001]]'
- '[[DD-SYS-AV-001]]'
- '[[DD-SYS-SCALE-001]]'
- '[[DD-APP-DB-003]]'
tags:
- diopside
- BD
- ADR
---

## 決定事項
- 非機能の詳細設計は、文書ごとに「入力・処理・出力・失敗時・検証指標」を必須記載項目とする。
- セキュリティ/可観測性/性能/可用性/拡張性/移行は、要求閾値を直接判定できる数値または条件を含める。
- 監視と[[RQ-GL-012|受入判定]]の証跡は、DD文書から `AT-OPS` / `AT-RPT` / `AT-GO` へ追跡可能なリンクを維持する。

## 理由
- テンプレート文のみの詳細設計では、実装・運用・受入の判定が文書間で分離し、再現性が低下する。
- [[RQ-RDR-023]] で定義したNFR整合条件を、DD層まで同一判定軸で落とし込む必要がある。
- 障害時の切り分け時間を短縮するには、DD段階で失敗条件と復旧判断を明示しておく必要がある。

## 影響
- [[DD-SYS-SEC-001]] / [[DD-APP-ERR-001]]: 認証境界、エラー分類、監査ログ必須項目を追加する。
- [[DD-APP-LOG-001]] / [[DD-SYS-PERF-001]] / [[DD-SYS-AV-001]]: 監視算出ルールと閾値判定フローを具体化する。
- [[DD-SYS-SCALE-001]] / [[DD-APP-DB-003]]: スケール適用トリガ、段階移行、ロールバック条件を明記する。

## 却下した選択肢
- DDをテンプレート中心で維持し、判定はAT文書のみで実施する案: 実装時点での品質ゲート不足につながるため不採用。
- 閾値をRQ/BDにのみ置き、DDでは参照のみとする案: 障害復旧手順と実装判断が文書から直接読めないため不採用。

## 変更履歴
- 2026-02-11: 新規作成 [[BD-SYS-ADR-020]]
