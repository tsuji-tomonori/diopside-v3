---
id: BD-UI-002
title: 検索画面情報設計
doc_type: UI設計
phase: BD
version: 1.0.3
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-11'
up:
- '[[RQ-SC-001]]'
- '[[RQ-FR-001]]'
related:
- '[[BD-ARCH-001]]'
- '[[BD-ADR-001]]'
- '[[BD-ADR-009]]'
- '[[BD-ADR-010]]'
- '[[RQ-FR-020]]'
- '[[RQ-FR-021]]'
tags:
- diopside
- BD
- UI
---


## 設計方針
- 検索画面では一覧探索の連続性を最優先とし、詳細モーダルで補助情報を重ねても一覧コンテキストを破壊しない。
- [[RQ-FR-020]] の見どころ導線は、時刻一覧ではなく音波状のコメント密度可視化を採用し、区間クリックで遷移する。
- [[RQ-FR-021]] の[[RQ-GL-017|ワードクラウド]]表示は詳細モーダル内の補助領域として定義し、主要操作（タグ切替・外部遷移・閉じる）を阻害しない。

## 設計要点
- 詳細モーダルの情報階層は「必須情報（タイトル/メタ）」「操作導線（遷移/コピー/タグ）」「補助情報（[[RQ-GL-016|コメント密度波形]]/[[RQ-GL-017|ワードクラウド]]）」の順で構成する。
- [[RQ-GL-016|コメント密度波形]]は密度が高い区間を強調し、区間クリックで `t=<開始秒>` 遷移を実行する。
- [[RQ-GL-017|ワードクラウド]]は取得成功時のみ画像表示し、未生成・取得失敗・破損時は専用プレースホルダへ置換する。
- モーダルを閉じた際は一覧の[[RQ-GL-014|検索条件]]・スクロール位置・表示件数を維持する。

## 詳細モーダル表示仕様（[[RQ-GL-016|コメント密度波形]]）
- **表示条件**: `videoId` が解決済みで詳細モーダルが開いたときに `highlights/{videoId}.json` を取得する。
- **表示位置**: モーダル右カラムの補助情報領域に配置し、主要操作の直下に表示する。
- **表示形式**: 時間軸に沿った音波状グラフで密度を描画し、[[RQ-GL-015|盛り上がり区間]]を強調表示する。
- **操作仕様**: 強調区間をクリックすると YouTube URL に `t=<区間開始秒>` を付与して遷移する。
- **ローディング状態**: 波形取得中はスケルトンまたは読み込み中表示を出し、主要操作は有効のまま維持する。
- **フォールバック状態**:
  - 未生成（404）: 「[[RQ-GL-015|盛り上がり区間]]なし」を表示。
  - 取得失敗（5xx/通信失敗）: 「密度データの取得に失敗しました。再試行してください」を表示。
  - 不正データ: 「波形データを表示できませんでした」を表示。
- **再試行導線**: 取得失敗/不正データ時のみ再試行ボタンを表示し、詳細モーダルを閉じずに再取得できる。

## 詳細モーダル表示仕様（[[RQ-GL-017|ワードクラウド]]）
- **表示条件**: `videoId` が解決済みで詳細モーダルが開いたときに `wordcloud/{videoId}.png` を取得する。
- **表示位置**: モーダル右カラムの補助情報領域に配置し、タイトル/主要操作より下段に表示する。
- **表示テキスト**: セクション名は「[[RQ-GL-017|ワードクラウド]]」とし、補足文で「公開チャット由来の集計結果」を明示する。
- **ローディング状態**: 画像取得中はスケルトンまたは読み込み中表示を出し、操作ボタンは有効のまま維持する。
- **フォールバック状態**:
  - 未生成（404）: 「[[RQ-GL-017|ワードクラウド]]は未生成です」を表示。
  - 取得失敗（5xx/通信失敗）: 「取得に失敗しました。再試行してください」を表示。
  - 破損画像: 「画像を表示できませんでした」を表示。
- **再試行導線**: 取得失敗/破損時のみ再試行ボタンを表示し、詳細モーダルを閉じずに再取得できる。

## 変更履歴
- 2026-02-10: 新規作成
- 2026-02-11: [[RQ-FR-021]] 対応として詳細モーダルの[[RQ-GL-017|ワードクラウド]]表示仕様とフォールバック挙動を追加
- 2026-02-11: [[RQ-FR-020]] 意味変更に合わせ、[[RQ-GL-016|コメント密度波形]]の表示仕様と区間クリック遷移を追加
