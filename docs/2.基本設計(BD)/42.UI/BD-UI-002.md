---
id: BD-UI-002
title: 検索画面情報設計
doc_type: UI設計
phase: BD
version: 1.0.5
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-11'
up:
- '[[RQ-SC-001]]'
- '[[RQ-FR-001]]'
related:
- '[[BD-ARCH-001]]'
- '[[BD-ADR-001]]'
- '[[BD-ADR-018]]'
- '[[BD-ADR-009]]'
- '[[BD-ADR-010]]'
- '[[RQ-RDR-032]]'
- '[[RQ-FR-020]]'
- '[[RQ-FR-021]]'
- '[[RQ-UX-003]]'
- '[[RQ-UX-013]]'
- '[[RQ-UX-015]]'
- '[[RQ-UX-020]]'
tags:
- diopside
- BD
- UI
---


## 設計方針
- 公開UIはモバイルファースト（スマートフォン優先、次にタブレット、最後にPC）で設計し、画面幅拡張時は情報量のみ段階的に増やす。
- 検索画面では一覧探索の連続性を最優先とし、詳細モーダルで補助情報を重ねても一覧コンテキストを破壊しない。
- [[RQ-FR-020]] の見どころ導線は、時刻一覧ではなく音波状のコメント密度可視化を採用し、区間クリックで遷移する。
- [[RQ-FR-021]] の[[RQ-GL-017|ワードクラウド]]表示は詳細モーダル内の補助領域として定義し、主要操作（タグ切替・外部遷移・閉じる）を阻害しない。
- [[RQ-UX-013]] に基づき、同一操作フロー内で確定済みの入力条件（検索語、タグ、並び順）の再入力を要求しない。
- [[RQ-UX-015]] に基づき、ヘルプ導線は主要画面で同一名称・同一配置を維持する。

## 設計要点
- 端末別の情報配置は「スマートフォン: 1カラム縦積み」「タブレット: 1.5カラム相当（主情報優先 + 補助情報を折りたたみ可能）」「PC: 2カラム（主情報 + 補助情報固定表示）」を基本とする。
- 主要操作（検索入力、タグ選択、並び順、詳細表示、YouTube遷移）は全端末で同一位置関係を維持し、端末間で操作手順を変えない。
- モーダルを閉じた際は一覧の[[RQ-GL-014|検索条件]]・スクロール位置・表示件数を維持する。
- 詳細モーダルの情報階層は「必須情報（タイトル/メタ）」「操作導線（遷移/コピー/タグ）」「補助情報（[[RQ-GL-016|コメント密度波形]]/[[RQ-GL-017|ワードクラウド]]）」の順で構成する。
- [[RQ-GL-016|コメント密度波形]]は密度が高い区間を強調し、区間クリックで `t=<開始秒>` 遷移を実行する。
- [[RQ-GL-017|ワードクラウド]]は取得成功時のみ画像表示し、未生成・取得失敗・破損時は専用プレースホルダへ置換する。

## 入力再利用とヘルプ導線
- [[RQ-UX-013]]: フィルタドロワーを再表示した場合でも、直前に確定した[[RQ-GL-014|検索条件]]を初期値として復元する。
- [[RQ-UX-013]]: 再入力が必要な項目（セッション切断等）は理由文言を表示し、再入力対象を最小項目へ限定する。
- [[RQ-UX-015]]: ヘルプ導線は「ヘルプ/お問い合わせ」で名称統一し、一覧画面と詳細モーダルで位置を変えない。
- [[RQ-UX-020]]: 将来拡張でダウンロード資料またはメール通知を導入する場合は、画面側で「同内容のHTML導線」を必須で併設する。
- [[RQ-UX-003]]: 将来拡張で音声/動画説明を導入する場合は、字幕または同等テキストへの導線を同一画面内に提供する。

## 端末優先レイアウト仕様
- **スマートフォン（390px基準）**: [[RQ-GL-014|検索条件]]、結果件数、カード一覧、詳細モーダルの順で縦積み表示し、横スクロール依存を作らない。
- **タブレット（768px基準）**: 一覧の視認性を優先しつつ、補助情報は開閉可能領域で保持して操作密度を上げる。
- **PC（1280px基準）**: 一覧と補助情報を同時参照可能な2カラムを許容するが、モバイル導線を変更しない。
- **状態遷移の一貫性**: 読み込み・失敗・再試行・復帰の状態名と遷移条件は端末で変えない。

## 詳細モーダル表示仕様（[[RQ-GL-016|コメント密度波形]]）
- **表示条件**: `videoId` が解決済みで詳細モーダルが開いたときに `highlights/{videoId}.json` を取得する。
- **表示位置**: モーダル右カラムの補助情報領域に配置し、主要操作の直下に表示する。
- **表示形式**: 時間軸に沿った音波状グラフで密度を描画し、[[RQ-GL-015|盛り上がり区間]]を強調表示する。
- **操作仕様**: 強調区間をクリックすると YouTube URL に `t=<区間開始秒>` を付与して遷移する。
- **ローディング状態**: 波形取得中はスケルトンまたは読み込み中表示を出し、主要操作は有効のまま維持する。
- **フォールバック状態**:
  - 未生成（404）: 「[[RQ-GL-015|盛り上がり区間]]なし」を表示。
  - 取得失敗（5xx/通信失敗）: 「密度データの取得に失敗しました。再試行してください」を表示。
  - 不正データ: 「波形データを表示できませんでした」を表示。
- **再試行導線**: 取得失敗/不正データ時のみ再試行ボタンを表示し、詳細モーダルを閉じずに再取得できる。

## 詳細モーダル表示仕様（[[RQ-GL-017|ワードクラウド]]）
- **表示条件**: `videoId` が解決済みで詳細モーダルが開いたときに `wordcloud/{videoId}.png` を取得する。
- **表示位置**: モーダル右カラムの補助情報領域に配置し、タイトル/主要操作より下段に表示する。
- **表示テキスト**: セクション名は「[[RQ-GL-017|ワードクラウド]]」とし、補足文で「公開チャット由来の集計結果」を明示する。
- **ローディング状態**: 画像取得中はスケルトンまたは読み込み中表示を出し、操作ボタンは有効のまま維持する。
- **フォールバック状態**:
  - 未生成（404）: 「[[RQ-GL-017|ワードクラウド]]は未生成です」を表示。
  - 取得失敗（5xx/通信失敗）: 「取得に失敗しました。再試行してください」を表示。
  - 破損画像: 「画像を表示できませんでした」を表示。
- **再試行導線**: 取得失敗/破損時のみ再試行ボタンを表示し、詳細モーダルを閉じずに再取得できる。

## 変更履歴
- 2026-02-10: 新規作成
- 2026-02-11: UX要件（[[RQ-UX-003]]/[[RQ-UX-013]]/[[RQ-UX-015]]/[[RQ-UX-020]]）に対する入力再利用・ヘルプ導線・将来拡張時の代替導線要件を追加 [[BD-ADR-018]]
- 2026-02-11: 公開UIのモバイルファースト方針と端末別レイアウト仕様（390/768/1280px）を追加 [[BD-ADR-018]]
- 2026-02-11: [[RQ-FR-021]] 対応として詳細モーダルの[[RQ-GL-017|ワードクラウド]]表示仕様とフォールバック挙動を追加 [[BD-ADR-009]]
- 2026-02-11: [[RQ-FR-020]] 意味変更に合わせ、[[RQ-GL-016|コメント密度波形]]の表示仕様と区間クリック遷移を追加 [[BD-ADR-010]]
