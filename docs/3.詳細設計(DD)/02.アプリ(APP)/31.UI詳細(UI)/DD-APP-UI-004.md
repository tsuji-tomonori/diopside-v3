---
id: DD-APP-UI-004
title: 詳細モーダル
doc_type: UI詳細
phase: DD
version: 1.0.4
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-14'
up:
- '[[BD-APP-UI-004]]'
- '[[DD-APP-UI-001]]'
related:
- '[[RQ-FR-013]]'
- '[[RQ-FR-014]]'
- '[[RQ-FR-020]]'
- '[[RQ-FR-021]]'
- '[[DD-APP-API-005]]'
- '[[DD-APP-UI-014]]'
- '[[DD-APP-UI-015]]'
- '[[DD-APP-UI-016]]'
- '[[UT-PLAN-001]]'
tags:
- diopside
- DD
- UI
---


## 詳細仕様
- 詳細モーダル（[[DD-APP-UI-004|UI-U03]]）は動画詳細情報と補助表示（波形/[[RQ-GL-017|ワードクラウド]]）を1箇所で提示する。
- モーダル表示中も背景一覧状態を保持し、閉じた際に復帰する。
- 部品実装責務は [[DD-APP-UI-014|ArchiveDetailModal]], [[DD-APP-UI-015|HighlightWavePanel]], [[DD-APP-UI-016|WordCloudPanel]] を参照する。

## 表示セクション
| セクション | 内容 | 取得元 |
| --- | --- | --- |
| ヘッダ | タイトル、公開日時、チャンネル | `archive_index` |
| 基本情報 | 再生時間、タグ、概要 | `archive_index` + `tag_master` |
| 補助表示 | [[RQ-GL-016|コメント密度波形]]、[[RQ-GL-017|ワードクラウド]] | `highlights/{videoId}.json`, `wordcloud/{videoId}.png` |
| 操作群 | YouTube遷移、URLコピー、閉じる | UIイベント |

## 状態遷移
- `loading`: モーダル開直後、補助表示の取得中。
- `partial`: 基本情報表示済み、補助表示の一部のみ成功。
- `ready`: 補助表示を含め表示完了。
- `error`: 基本情報取得失敗で再試行導線のみ表示。

## 操作制約
- YouTube遷移は常に有効とし、補助表示失敗で無効化しない。
- `Esc` と背景クリックで閉じる操作を許可する。
- URLコピー成功時はトーストを3秒表示する。

## アクセシビリティ制約
- モーダル表示直後の初期フォーカスはモーダル見出しまたは先頭操作要素へ移動し、背景要素へフォーカスを残さない。
- モーダル表示中はTab/Shift+Tabでモーダル内フォーカス循環を維持し、背景コンテンツへフォーカス移動させない。
- モーダルを閉じた際は、起動元の一覧カードまたは起動ボタンへフォーカスを戻し、一覧再探索の連続性を維持する。
- 固定ヘッダ/フッタ配下でフォーカス対象が隠れないよう、スクロール補正（例: `scroll-margin-top`）を適用する。
- モーダルコンテナは `role="dialog"` と `aria-modal="true"` を付与し、タイトルと説明を `aria-labelledby`/`aria-describedby` で関連付ける。
- 補助表示の読み込み/失敗通知は `role="status"` または `aria-live="polite"` 領域で通知し、フォーカス移動を強制しない。

## I/Oまたは責務
- 入力: 選択動画ID、配信JSON、補助表示アセット、操作イベント。
- 出力: 詳細表示状態、遷移イベント、再試行要求、外部遷移イベント。

## 変更履歴
- 2026-02-14: `UI-U03` を明記し、詳細モーダル関連コンポーネント文書（`DD-APP-UI-014`〜`DD-APP-UI-016`）への参照を追加
- 2026-02-13: モーダルのアクセシビリティ制約（初期フォーカス/フォーカストラップ/復帰/非遮蔽/dialog属性）を追加
- 2026-02-11: 表示セクション、状態遷移、操作制約を具体化
- 2026-02-10: 新規作成
