---
id: DD-PERF-001
title: 性能設計
doc_type: 性能設計
phase: DD
version: 1.0.2
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-11'
up:
- '[[BD-MON-001]]'
- '[[BD-MON-002]]'
related:
- '[[RQ-PS-001]]'
- '[[RQ-OBY-001]]'
- '[[AT-OPS-001]]'
- '[[AT-RPT-001]]'
tags:
- diopside
- DD
- PERF
---


## 目的
- [[RQ-PS-001]] の性能閾値を、同一条件で継続計測し判定可能にする。
- 劣化検知から復旧確認までを定量化し、次リリースでの改善判断を標準化する。

## 計測条件
| 項目 | 条件 |
| --- | --- |
| ネットワーク | 下り10Mbps / 上り3Mbps / RTT 50ms |
| 端末 | ミドルレンジ端末 |
| 同時利用 | 10未満 |
| 計測回数 | 指標ごとに最低30サンプル |
| 判定値 | p95 |

## 主要指標と閾値
| 指標ID | 測定区間 | 閾値 | 根拠 |
| --- | --- | --- | --- |
| PERF-LCP | 初回表示開始 -> 主表示安定 | 2.5秒以下 | [[RQ-PS-001]] |
| PERF-SEARCH | 検索操作確定 -> 再描画完了 | 1.5秒以下 | [[RQ-PS-001]] |
| PERF-LOAD | `archive_index.pN` 読込開始 -> 結果表示 | 2.0秒以下 | [[RQ-PS-001]] |
| PERF-SORT | 並び替え操作確定 -> 並び替え完了 | 1.0秒以下 | [[RQ-PS-001]] |

## p95算出ルール
- 1日の測定結果を時系列で集計し、各指標の95パーセンタイルを算出する。
- 外部要因で計測不能なサンプルは除外し、除外理由を記録する。
- 同日内で欠測が20%を超えた場合は性能判定を無効とし、再計測を必須とする。

## 劣化時の扱い
| 条件 | 判定 | 対応 |
| --- | --- | --- |
| 閾値超過1回 | Warning | 翌日再計測 |
| 閾値超過3回連続 | Incident | 改善チケット起票、次リリースまでに対処 |
| 計測不能継続 | Monitoring Failure | 計測基盤障害として切り分け |

## 出力と連携
- 日次性能サマリ（指標、p95、除外件数、閾値判定）を生成し、[[AT-OPS-001]] へ記録する。
- リリース判定時に対象期間のp95実績を [[AT-RPT-001]] へ転記し、[[AT-GO-001]] の判定入力とする。
- 劣化インシデントは対応期限と改善結果を同一レコードで追跡する。

## 変更履歴
- 2026-02-11: 計測条件、主要指標、p95算出、劣化時運用、AT連携を追加
- 2026-02-10: 新規作成
