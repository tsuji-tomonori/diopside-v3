---
id: DD-AV-001
title: 可用性詳細
doc_type: 可用性設計
phase: DD
version: 1.0.3
status: 下書き
owner: RQ-SH-001
created: 2026-01-31
updated: '2026-02-11'
up:
- '[[BD-MON-001]]'
- '[[BD-MON-002]]'
- '[[BD-QUAL-001]]'
related:
- '[[RQ-AV-001]]'
- '[[RQ-OBY-001]]'
- '[[AT-OPS-001]]'
- '[[AT-RPT-001]]'
tags:
- diopside
- DD
- AV
---


## 目的
- [[RQ-AV-001]] の可用率/MTTR要件を、監視データから再現可能に算出する。
- 障害発生時の一次復旧判定を時刻基準で統一し、運用判断の揺れを防ぐ。

## 可用率算出
| 項目 | 定義 |
| --- | --- |
| 観測対象時間 | 月内総時間 - 計画停止時間（上限120分） |
| 正常時間 | `2xx/3xx` 応答を返した1分バケット合計 |
| 月次可用率 | 正常時間 / 観測対象時間 |
| 合格基準 | 99.5%以上 |

## MTTR算出
| 項目 | 定義 |
| --- | --- |
| 障害開始時刻 | 主要SLIが閾値を下回った時刻 |
| 一次復旧時刻 | 正常閾値へ戻り15分連続維持した時刻 |
| MTTR | 一次復旧時刻 - 障害開始時刻 |
| 合格基準 | 運用時間帯内は30分以内 |

## 障害分類
| 区分 | 判定条件 | 扱い |
| --- | --- | --- |
| 内部障害 | 収集/配信/設定不備による失敗 | 可用率計算に含める |
| 外部障害 | YouTube API/CDNなど外部要因が15分以上断続失敗 | 可用率から分離記録し、備考で明示 |
| 計画停止 | 事前通知済み停止 | 観測対象時間から除外 |

## 監視アラート
- Critical: 月次可用率が99.5%未達見込み、または連続失敗3回。
- Warning: 単発障害だが15分超過、またはMTTR見込み30分超過。
- Info: 短時間劣化で自己回復。

## 運用フロー
1. 障害検知時に障害区分を確定する。
2. 内部障害は一次復旧（サービス再開）を優先し、復旧後に恒久対処を計画する。
3. 外部障害は依存先状況を記録し、回復後に影響時間を切り分ける。
4. 日次でMTTRと未解決件数を集計し、[[AT-OPS-001]] へ記録する。
5. 月次判定値を [[AT-RPT-001]] に転記し、Go/No-Go判定へ渡す。

## 変更履歴
- 2026-02-11: 品質特性との追跡性補強のため `BD-QUAL-001` 参照を追加
- 2026-02-11: 可用率/MTTRの算出式、障害分類、運用フローを追加
- 2026-02-10: 新規作成
