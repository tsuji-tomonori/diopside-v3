---
name: a11y-pointer-targets
description: ターゲットサイズ(24px)・ドラッグ代替・ポインター操作の誤操作防止をWCAG 2.2 AA相当で実装する
compatibility: opencode
metadata:
  standard: WCAG-2.2
  level: AA
  lang: ja
  area: pointer-target-size-dragging
---

# a11y-pointer-targets

## 目的
ポインター入力（マウス/タッチ/ペン）における操作性を、WCAG 2.2 AA相当で担保します。
特に WCAG 2.2 で追加された **2.5.7 Dragging Movements** と **2.5.8 Target Size (Minimum)** に対応し、モバイルや運動機能に制約のある利用者でも誤操作なく操作できるUIを実装します。

## 対象となる達成基準（WCAG 2.2）
- 2.5.1 ポインタージェスチャ（A）
- 2.5.2 ポインターキャンセル（A）
- 2.5.3 ラベルを名前に含める（A）
- 2.5.4 動作による起動（A）
- 2.5.7 ドラッグ操作（AA）
- 2.5.8 ターゲットのサイズ（最低限）（AA）

## 入力として必要な情報
- 対象画面/コンポーネント（ドラッグ&ドロップ、スライダー、地図、カンバン等）
- タップ/クリック対象の一覧（アイコン、チップ、行アクション、インラインリンク等）
- モバイル対応の有無、想定最小画面（例: 320 CSS px幅）

## 実施手順
### 1) ターゲットサイズ（2.5.8）を満たす
- 原則: **24×24 CSS px** 以上のクリック/タップ領域を確保する
- 例外（スペーシング等）を使う場合は、根拠と対象箇所を記録し、再評価できるようにする

**実装パターン**
- アイコンが小さい場合でも、`padding` を増やしてクリック領域を広げる
- リスト行の右端アイコン等は、行全体をボタン化/リンク化して誤操作を減らす
- “近接するターゲット” が並ぶ場合は、間隔（スペーシング）で要件を満たす

### 2) ドラッグ操作（2.5.7）に代替手段を提供する
- ドラッグが必須の操作（並び替え、スライダー、マップ移動等）に対して、**ドラッグ不要の操作**を提供する
  - 例: “上へ/下へ” ボタン、数値入力、メニューからの移動、キーボード操作
- 代替操作は同一の結果を達成できること（同等性）

### 3) 複雑ジェスチャ（2.5.1）を避ける
- 2点タップ、ピンチ、スワイプなどの複雑操作は、単一ポインター操作でも代替可能にする
- 例: ズームは +/− ボタン、リスト選択はチェックボックス等

### 4) 誤操作の取消（2.5.2）を担保する
- “押した瞬間に確定” ではなく、押下後にキャンセルできる設計にする
  - 例: ドラッグ中の取消、確定前の確認、Undo、popover外クリックで閉じる等
- 特に破壊的操作（削除等）は確認/Undoを優先

### 5) 動作による起動（2.5.4）を任意化する
- 端末の振り動作などで機能が起動する場合、無効化できる、またはUI操作でも同等に実行できる

## 受入基準 / Definition of Done
- クリック/タップターゲットが 24×24 CSS px 以上、または例外条件を満たす（例外は記録済み）
- ドラッグ必須の操作に、ドラッグ不要の代替がある
- 複雑ジェスチャに、単一ポインターの代替がある
- 破壊的/重要操作に、キャンセルまたはUndo等の誤操作防止がある

## 手動テスト手順（最小セット）
- モバイル幅で、主要操作が誤タップしないサイズ/間隔で行える
- ドラッグ&ドロップ操作が、ボタン/メニュー等の代替で実行できる
- スライダー等がキーボード/数値入力で調整できる（該当する場合）

## よくある落とし穴
- 見た目は余白があるが、実際のクリック領域がアイコンサイズのまま
- ドラッグはできるが、ドラッグ以外の代替がない（2.5.7違反）
- 小さなリンクが密集して誤タップが多発（2.5.8違反）
