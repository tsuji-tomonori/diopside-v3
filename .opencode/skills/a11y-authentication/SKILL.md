---
name: a11y-authentication
description: 認証（ログイン/MFA/CAPTCHA）をWCAG 2.2 AA相当（3.3.8）で実装し、パスワードマネージャやコピペを阻害しない
compatibility: opencode
metadata:
  standard: WCAG-2.2
  level: AA
  lang: ja
  area: authentication
---

# a11y-authentication

## 目的
認証（ログイン/登録/再認証/MFA）を、セキュリティと両立しつつ **WCAG 2.2 AA相当**でアクセシブルに実装します。  
特に WCAG 2.2 で追加された **3.3.8 Accessible Authentication (Minimum)（AA）** に対応し、「記憶」「解読」「転記」を強要する設計を避けます。

## 対象となる達成基準（WCAG 2.2）
- 3.3.8 アクセシブルな認証（最低限）（AA）【WCAG 2.2追加】
- （関連）1.3.5 入力目的の特定（AA）、3.3.1 エラーの特定（A）、2.1.1 キーボード（A）

## 入力として必要な情報
- 認証方式（ID/パスワード、SSO、パスキー、メールリンク、MFA、CAPTCHA等）
- 使用するIdP/認証UI（Cognito/Auth0/Okta等、または自前）
- セッションタイムアウト/再認証の要件（業務要件/規制）

## 実施手順
### 1) “認知機能テスト” に依存しない（3.3.8）
以下を強制しない設計にする（または代替手段を提供する）:
- サイト固有パスワードの「記憶」だけに依存する
- 画像の文字を読み取って入力（解読）
- ワンタイムコードを見て「転記」するのみ（コピー不可等）
- パズル/クイズ/識別（CAPTCHA）だけで通す

### 2) パスワードマネージャを阻害しない
- `autocomplete` を正しく設定（例: `username`, `current-password`, `new-password`）
- 入力欄の `type`/`name` を不自然に難読化しない
- コピペ禁止・右クリック禁止・入力支援無効化など、不要な制限を避ける

### 3) MFA/ワンタイムコードの入力負荷を下げる
- コード入力欄はコピー&ペーストを許可
- 可能なら “ワンタップ” “自動入力” 等（OS/ブラウザ連携）を阻害しない
- 分割入力UI（6桁別入力など）を採用する場合:
  - ペーストで一括入力できる
  - フォーカス移動がキーボードで破綻しない

### 4) CAPTCHA を使う場合の代替
- 音声CAPTCHA、メール/電話確認、レート制限 + リスクベース認証など、代替/補完策を用意
- CAPTCHAのみに依存しない（失敗時に詰む設計を避ける）

### 5) エラーとリカバリをアクセシブルに
- エラー内容をテキストで明確に（誤った認証情報、ロック、期限切れ等）
- ロック解除や再試行導線がキーボードで完結する
- “パスワードを忘れた” 等の回復導線が見つけやすい

## 受入基準 / Definition of Done
- パスワードマネージャが動作し、コピペを阻害しない
- 認証が「記憶/解読/転記」だけに依存しない（必要な場合は代替手段がある）
- MFAコード入力がコピー&ペースト可能で、分割UIでも破綻しない
- CAPTCHAがある場合でも代替/回避策がある
- エラー/回復導線が支援技術でも理解できる

## 手動テスト手順（最小セット）
- パスワードマネージャでID/パスワードが自動入力できる
- MFAコードをコピー&ペーストで入力できる
- キーボードのみでログイン→失敗→回復導線（パスワード再設定）へ到達できる

## よくある落とし穴
- “セキュリティ” を理由にコピペ禁止・パスワードマネージャ無効化
- 6桁分割入力で、ペーストできず転記が必須
- CAPTCHA失敗で回復不能（代替なし）
