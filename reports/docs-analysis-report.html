<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>diopside-v3 ドキュメント分析レポート</title>
    <style>
        :root {
            --primary: #1a365d;
            --secondary: #2b6cb0;
            --success: #38a169;
            --warning: #d69e2e;
            --danger: #e53e3e;
            --info: #3182ce;
            --light: #f7fafc;
            --dark: #1a202c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 40px 20px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .meta-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .meta-info span {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .card h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .card .score {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .card .score.good { color: var(--success); }
        .card .score.warning { color: var(--warning); }
        .card .score.danger { color: var(--danger); }

        nav.toc {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav.toc h2 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        nav.toc ol {
            padding-left: 25px;
        }

        nav.toc li {
            margin: 8px 0;
        }

        nav.toc a {
            color: var(--secondary);
            text-decoration: none;
        }

        nav.toc a:hover {
            text-decoration: underline;
        }

        section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        section h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        section h3 {
            color: var(--secondary);
            margin: 25px 0 15px 0;
        }

        section h4 {
            color: #4a5568;
            margin: 20px 0 10px 0;
        }

        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge-success { background: #c6f6d5; color: #22543d; }
        .badge-warning { background: #fefcbf; color: #744210; }
        .badge-danger { background: #fed7d7; color: #742a2a; }
        .badge-info { background: #bee3f8; color: #2a4365; }

        .issue-list {
            list-style: none;
            padding: 0;
        }

        .issue-item {
            background: #f8f9fa;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .issue-item.critical {
            border-left-color: var(--danger);
            background: #fff5f5;
        }

        .issue-item.resolved {
            border-left-color: var(--success);
            background: #f0fff4;
        }

        .issue-item h5 {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .issue-item p {
            color: #666;
            margin: 5px 0;
        }

        .issue-item .file-ref {
            font-family: monospace;
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85rem;
        }

        .recommendation {
            background: linear-gradient(135deg, #ebf8ff, #e6fffa);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .recommendation h5 {
            color: var(--info);
            margin-bottom: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: var(--primary);
            color: white;
        }

        tr:hover {
            background: #f7fafc;
        }

        .progress-bar {
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar .fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .fill.good { background: linear-gradient(90deg, #48bb78, #38a169); }
        .fill.warning { background: linear-gradient(90deg, #ecc94b, #d69e2e); }
        .fill.danger { background: linear-gradient(90deg, #fc8181, #e53e3e); }

        .summary-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .summary-box h3 {
            color: white;
            margin-bottom: 15px;
        }

        .action-item {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .priority-tag {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .priority-p0 { background: #e53e3e; }
        .priority-p1 { background: #d69e2e; }
        .priority-p2 { background: #3182ce; }

        footer {
            text-align: center;
            padding: 30px;
            color: #666;
        }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            .meta-info { flex-direction: column; gap: 10px; }
            section { padding: 20px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>diopside-v3 ドキュメント分析レポート</h1>
        <p>設計文書の品質評価と改善提案</p>
        <div class="meta-info">
            <span>分析日: 2026-02-12 | 更新日: 2026-02-13</span>
            <span>対象ファイル数: 316 → 332（+16件）</span>
            <span>分析観点: 10項目</span>
        </div>
    </header>

    <div class="container">
        <!-- サマリーカード（改善後） -->
        <div class="summary-cards">
            <div class="card">
                <h3>要求定義</h3>
                <div class="score good">88%</div>
                <p>✅ 曖昧性解消済</p>
            </div>
            <div class="card">
                <h3>基本設計</h3>
                <div class="score good">90%</div>
                <p>✅ バッチ定義補完済</p>
            </div>
            <div class="card">
                <h3>詳細設計</h3>
                <div class="score good">85%</div>
                <p>✅ ARCH-002追加済</p>
            </div>
            <div class="card">
                <h3>テスト設計</h3>
                <div class="score warning">78%</div>
                <p>✅ 15テストケース追加</p>
            </div>
            <div class="card">
                <h3>運用設計</h3>
                <div class="score good">92%</div>
                <p>✅ バックアップ/障害判定補完済</p>
            </div>
        </div>

        <!-- 目次 -->
        <nav class="toc">
            <h2>目次</h2>
            <ol>
                <li><a href="#section1">要求の矛盾分析</a></li>
                <li><a href="#section2">基本設計と要求の整合性</a></li>
                <li><a href="#section3">基本設計の矛盾分析</a></li>
                <li><a href="#section4">詳細設計と基本設計の整合性</a></li>
                <li><a href="#section5">実装可能性の評価</a></li>
                <li><a href="#section6">設計の曖昧性分析</a></li>
                <li><a href="#section7">テスト設計のカバレッジ</a></li>
                <li><a href="#section8">運用設計の評価</a></li>
                <li><a href="#section9">非機能要求の達成度</a></li>
                <li><a href="#section10">規約・ドキュメント標準の評価</a></li>
                <li><a href="#summary">総合評価と改善ロードマップ</a></li>
            </ol>
        </nav>

        <!-- セクション1: 要求の矛盾分析 -->
        <section id="section1">
            <h2>1. 要求の矛盾分析 <span class="badge badge-warning">要改善</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 72%"></div>
            </div>
            <p>直接矛盾は少ないが、潜在的な緊張関係と曖昧性が存在</p>

            <h3>検出された問題</h3>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> 段階ロード中の操作制限が未定義</h5>
                    <p>tag_master取得中にキーワード検索が入力されると、不完全なタグ辞書で検索が実行される可能性</p>
                    <p class="file-ref">RQ-UC-002:25-27, RQ-FR-008:33-35</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> 盛り上がり区間の定義が設計任せ</h5>
                    <p>コメント密度波形との対応関係、検出アルゴリズム、複数ある場合の選択基準が未定義</p>
                    <p class="file-ref">RQ-UC-006:27, RQ-FR-020</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> 性能要件とコスト制約の調和方法が曖昧</h5>
                    <p>キャッシュ期間見直し時の性能への影響が明示されていない</p>
                    <p class="file-ref">RQ-PS-001:41, RQ-COST-001:35-36</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> 削除済み動画処理がユースケース/機能要求に欠落</h5>
                    <p>スコープ(RQ-SC-001)には記載があるが、対応するUCとFRが存在しない</p>
                    <p class="file-ref">RQ-SC-001:43</p>
                </li>
            </ul>

            <div class="recommendation">
                <h5>改善提案</h5>
                <ul>
                    <li>UC-002に「タグ辞書取得完了まで検索操作を無効化または保留」と明記</li>
                    <li>ドメインモデル(RQ-DM-015)で「コメント密度が上位N%を超過する区間」と定義</li>
                    <li>新規UC-009「削除済み動画を処理する」と対応FR-026を追加</li>
                </ul>
            </div>
        </section>

        <!-- セクション2: 基本設計と要求の整合性 -->
        <section id="section2">
            <h2>2. 基本設計と要求の整合性 <span class="badge badge-warning">要改善</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 80%"></div>
            </div>
            <p>機能要求25件中ほぼすべてが基本設計に対応しているが、一部責務が不明確</p>

            <h3>対応状況</h3>
            <table>
                <tr>
                    <th>要求カテゴリ</th>
                    <th>対応BD</th>
                    <th>状態</th>
                </tr>
                <tr>
                    <td>収集機能 (RQ-FR-001~004)</td>
                    <td>BD-API-002, BD-UI-001</td>
                    <td><span class="badge badge-success">対応済</span></td>
                </tr>
                <tr>
                    <td>検索・一覧 (RQ-FR-006~015)</td>
                    <td>BD-API-001, BD-UI-002</td>
                    <td><span class="badge badge-success">対応済</span></td>
                </tr>
                <tr>
                    <td>波形/ワードクラウド (RQ-FR-020~023)</td>
                    <td>BD-API-001</td>
                    <td><span class="badge badge-warning">部分対応</span></td>
                </tr>
                <tr>
                    <td>非機能要求 (RQ-AV, RQ-PS)</td>
                    <td>BD-MON-001, BD-QUAL-001</td>
                    <td><span class="badge badge-success">対応済</span></td>
                </tr>
            </table>

            <h3>検出された問題</h3>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">High</span> 補助機能の生成責務が不明確</h5>
                    <p>波形/ワードクラウド生成のバッチ処理がBD-ARCH-001のバッチ一覧に欠落</p>
                    <p class="file-ref">BD-API-001:70, BD-ARCH-001:61-69</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> ADR間の依存関係が片方向のみ</h5>
                    <p>BD-ADR-021からBD-ARCH-001への参照はあるが、逆方向の参照がない</p>
                    <p class="file-ref">BD-ADR-021:52-60, BD-ARCH-001:10-26</p>
                </li>
            </ul>
        </section>

        <!-- セクション3: 基本設計の矛盾分析 -->
        <section id="section3">
            <h2>3. 基本設計の矛盾分析 <span class="badge badge-warning">要改善</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 70%"></div>
            </div>

            <h3>検出された矛盾</h3>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> API参照系vs更新系の正本が不明確</h5>
                    <p>BD-API-001とBD-API-002で同じAPI定義が重複しており、どちらが正本か判断困難</p>
                    <p class="file-ref">BD-API-001:52-65, BD-API-002:45-66</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> LLMタグ取込→再生成の自動トリガー有無が不明</h5>
                    <p>BD-DATA-001では「同一publish_run_idで再生成」と記載されているが、BD-API-002ではトリガー方法が不明</p>
                    <p class="file-ref">BD-DATA-001:58, BD-API-002:86-91</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> バッチ処理設計が不完全</h5>
                    <p>波形生成、ワードクラウド生成、タグマスター更新バッチが未定義</p>
                    <p class="file-ref">BD-ARCH-001:61-79</p>
                </li>
            </ul>

            <div class="recommendation">
                <h5>改善提案</h5>
                <ul>
                    <li>BD-ARCH-001のバッチ一覧を拡張（BAT-006: 波形/ワードクラウド生成）</li>
                    <li>BD-API-001/002の正本を明記し、相互参照を整理</li>
                    <li>タグ提案取込契約に反映後処理（自動配信反映トリガー）を追加</li>
                </ul>
            </div>
        </section>

        <!-- セクション4: 詳細設計と基本設計の整合性 -->
        <section id="section4">
            <h2>4. 詳細設計と基本設計の整合性 <span class="badge badge-danger">要対応</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill danger" style="width: 60%"></div>
            </div>
            <p>詳細設計の成熟度: 60% - 未完成領域が多数存在</p>

            <h3>完成度の高い領域</h3>
            <table>
                <tr>
                    <th>領域</th>
                    <th>状態</th>
                    <th>備考</th>
                </tr>
                <tr>
                    <td>API総論 (DD-API-001)</td>
                    <td><span class="badge badge-success">完成</span></td>
                    <td>Problem Details仕様、状態遷移が詳細</td>
                </tr>
                <tr>
                    <td>エラーコード体系 (DD-ERR-001)</td>
                    <td><span class="badge badge-success">完成</span></td>
                    <td>15パターン定義済み</td>
                </tr>
                <tr>
                    <td>ログスキーマ (DD-LOG-001)</td>
                    <td><span class="badge badge-success">完成</span></td>
                    <td>イベント語彙表定義済み</td>
                </tr>
            </table>

            <h3>未完成領域</h3>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> DD-ARCH-002/003が存在しない</h5>
                    <p>Next.js App Router (RSC/Client境界) の実装ガイドが欠落</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> 全テーブルのカラム詳細定義が不完全</h5>
                    <p>DD-DDL-003〜DD-DDL-016の個別カラム定義ドキュメントが必要</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Major</span> ESLint/tsconfig.json設定が未記載</h5>
                    <p>DD-CODE-001の規約を強制する実装設定が存在しない</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Major</span> 冪等性の実装方法が未指定</h5>
                    <p>24時間有効期限の実装方法（インメモリ/DB/キャッシュ）が不明</p>
                    <p class="file-ref">DD-API-002:70-72</p>
                </li>
            </ul>
        </section>

        <!-- セクション5: 実装可能性の評価 -->
        <section id="section5">
            <h2>5. 実装可能性の評価 <span class="badge badge-warning">要改善</span></h2>

            <h3>フロントエンド実装可能性</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 65%"></div>
            </div>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">不足</span> コンポーネント責務の曖昧さ</h5>
                    <p>SearchConditionPanelのイベント形式(onConditionChangeのpayload)が未定義</p>
                    <p class="file-ref">DD-UI-002:37-42</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">不足</span> State管理ライブラリが未選定</h5>
                    <p>Redux/Zustand/React Contextからの選択、各状態の更新トリガーが不明</p>
                    <p class="file-ref">DD-UI-001:40-43</p>
                </li>
            </ul>

            <h3>バックエンド実装可能性</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 75%"></div>
            </div>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">不足</span> APIステータス決定表がない</h5>
                    <p>入力不正時(400 vs 422)、部分成功時(200 vs 207)の判定基準が不明</p>
                    <p class="file-ref">BD-API-003:34-58</p>
                </li>
            </ul>

            <h3>バッチ実装可能性</h3>
            <div class="progress-bar">
                <div class="fill danger" style="width: 50%"></div>
            </div>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">重大</span> バッチ実行制約が未定義</h5>
                    <p>最大実行時間、Retry回数、Retry間隔、同時実行数が各バッチで未指定</p>
                    <p class="file-ref">BD-ARCH-001:61-79</p>
                </li>
            </ul>

            <h3>インフラ実装可能性</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 70%"></div>
            </div>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">不足</span> マルチリージョン/フェイルオーバー設計がない</h5>
                    <p>99.5%可用率達成のための冗長化戦略が未定義</p>
                    <p class="file-ref">BD-DEP-001, BD-DEP-004</p>
                </li>
            </ul>
        </section>

        <!-- セクション6: 設計の曖昧性分析 -->
        <section id="section6">
            <h2>6. 設計の曖昧性分析 <span class="badge badge-warning">要改善</span></h2>

            <h3>主要な曖昧性</h3>
            <table>
                <tr>
                    <th>項目</th>
                    <th>現状</th>
                    <th>必要な明確化</th>
                    <th>優先度</th>
                </tr>
                <tr>
                    <td>盛り上がり区間</td>
                    <td>設計任せ</td>
                    <td>コメント密度N%超過の定義</td>
                    <td><span class="badge badge-danger">P0</span></td>
                </tr>
                <tr>
                    <td>bootstrap初期カード件数</td>
                    <td>未定義</td>
                    <td>具体的な件数値</td>
                    <td><span class="badge badge-warning">P1</span></td>
                </tr>
                <tr>
                    <td>「体感待ちの少ない」</td>
                    <td>主観的表現</td>
                    <td>削除し客観指標のみに</td>
                    <td><span class="badge badge-info">P2</span></td>
                </tr>
                <tr>
                    <td>最終ページ条件</td>
                    <td>未明記</td>
                    <td>総件数/pageSizeの計算式</td>
                    <td><span class="badge badge-warning">P1</span></td>
                </tr>
                <tr>
                    <td>再試行ボタン動作</td>
                    <td>概要のみ</td>
                    <td>指数バックオフ設定</td>
                    <td><span class="badge badge-warning">P1</span></td>
                </tr>
            </table>
        </section>

        <!-- セクション7: テスト設計のカバレッジ -->
        <section id="section7">
            <h2>7. テスト設計のカバレッジ <span class="badge badge-danger">重大な問題</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill danger" style="width: 44%"></div>
            </div>
            <p>機能要求25件中、完全カバー7件(28%)、部分カバー7件(28%)、未カバー11件(44%)</p>

            <h3>カバレッジ状況</h3>
            <table>
                <tr>
                    <th>テスト層</th>
                    <th>対応設計</th>
                    <th>カバー率</th>
                    <th>問題</th>
                </tr>
                <tr>
                    <td>単体テスト(UT)</td>
                    <td>詳細設計(DD)</td>
                    <td>53% (8/15 API)</td>
                    <td>DD-API-011~015の対応UTなし</td>
                </tr>
                <tr>
                    <td>結合テスト(IT)</td>
                    <td>基本設計(BD)</td>
                    <td>67%</td>
                    <td>E2E統合シナリオ欠落</td>
                </tr>
                <tr>
                    <td>受入テスト(AT)</td>
                    <td>要求(RQ)</td>
                    <td>56% (14/25 FR)</td>
                    <td>RQ-FR-002~004,009等が未カバー</td>
                </tr>
            </table>

            <h3>検出された重大な問題</h3>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">P0</span> UTカバレッジ漏れ</h5>
                    <p>DD-API-011/012/013/014/015に対応するUTケースが存在しない</p>
                    <p>必要な追加: UT-CASE-009〜013</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">P0</span> IT E2Eシナリオ不足</h5>
                    <p>収集→タグマスター生成→Web表示までの統合テストがない</p>
                    <p>必要な追加: IT-CASE-009/010/011</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">P0</span> AT要求カバレッジ不足</h5>
                    <p>RQ-FR-002/003/004/009/019/024/025の受入シナリオがない</p>
                    <p>必要な追加: AT-SCN-008/009</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">P0</span> テストの具体性不足</h5>
                    <p>期待値が「確認する」止まりで、具体的なJSON/観測基準がない</p>
                </li>
            </ul>

            <div class="recommendation">
                <h5>必要なテストケース追加</h5>
                <table>
                    <tr>
                        <th>追加ファイル</th>
                        <th>対象</th>
                        <th>優先度</th>
                    </tr>
                    <tr>
                        <td>UT-CASE-009〜013</td>
                        <td>配信反映/タグ管理/docs公開API</td>
                        <td>P0</td>
                    </tr>
                    <tr>
                        <td>IT-CASE-009〜013</td>
                        <td>E2Eフロー/障害再現</td>
                        <td>P0</td>
                    </tr>
                    <tr>
                        <td>AT-SCN-008/009</td>
                        <td>メタデータ正規化/タグ管理運用</td>
                        <td>P0</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- セクション8: 運用設計の評価 -->
        <section id="section8">
            <h2>8. 運用設計の評価 <span class="badge badge-warning">要改善</span></h2>

            <h3>評価サマリー</h3>
            <div class="progress-bar">
                <div class="fill warning" style="width: 65%"></div>
            </div>

            <h3>網羅されている要素</h3>
            <table>
                <tr>
                    <th>要素</th>
                    <th>対応ドキュメント</th>
                    <th>状態</th>
                </tr>
                <tr>
                    <td>監視設計</td>
                    <td>BD-MON-001/002/003</td>
                    <td><span class="badge badge-success">完成</span></td>
                </tr>
                <tr>
                    <td>障害対応手順</td>
                    <td>AT-RUN-001</td>
                    <td><span class="badge badge-success">完成</span></td>
                </tr>
                <tr>
                    <td>デプロイ手順</td>
                    <td>AT-REL-001, DD-DEP-001</td>
                    <td><span class="badge badge-success">完成</span></td>
                </tr>
                <tr>
                    <td>コスト管理</td>
                    <td>DD-COST-001</td>
                    <td><span class="badge badge-success">完成</span></td>
                </tr>
            </table>

            <h3>欠落している要素</h3>
            <ul class="issue-list">
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> バックアップ・災害復旧計画が完全に欠落</h5>
                    <p>S3データ、CloudFront設定のバックアップ頻度・保持期間・復旧手順が未定義</p>
                    <p>必要: BD-DEP-006を新規作成</p>
                </li>
                <li class="issue-item critical">
                    <h5><span class="badge badge-danger">Critical</span> 可用性計算の障害分類が再現不可能</h5>
                    <p>「15分以上断続失敗」基準が離散的で、集計時に再現不能</p>
                    <p class="file-ref">DD-AV-001:47-52</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">High</span> コスト超過検知遅延が恒常的</h5>
                    <p>タグ反映遅延48時間+有効化遅延24時間 = 検知まで最大15営業日</p>
                    <p class="file-ref">RQ-COST-001:55</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Medium</span> MTTR判定時間帯の複雑性</h5>
                    <p>運用時間帯内/外の二重基準が複雑</p>
                    <p class="file-ref">RQ-AV-001:36</p>
                </li>
            </ul>
        </section>

        <!-- セクション9: 非機能要求の達成度 -->
        <section id="section9">
            <h2>9. 非機能要求の達成度 <span class="badge badge-success">概ね良好</span></h2>

            <h3>定義済み非機能要求</h3>
            <table>
                <tr>
                    <th>カテゴリ</th>
                    <th>目標値</th>
                    <th>測定方法</th>
                    <th>状態</th>
                </tr>
                <tr>
                    <td>可用性</td>
                    <td>月次99.5%以上</td>
                    <td>経路別2xx/3xx応答の1分バケット集計</td>
                    <td><span class="badge badge-success">定義済</span></td>
                </tr>
                <tr>
                    <td>性能(LCP)</td>
                    <td>p95 2.5秒以下</td>
                    <td>CloudWatch + 4G環境実測</td>
                    <td><span class="badge badge-success">定義済</span></td>
                </tr>
                <tr>
                    <td>性能(検索)</td>
                    <td>p95 1.5秒以下</td>
                    <td>同上</td>
                    <td><span class="badge badge-success">定義済</span></td>
                </tr>
                <tr>
                    <td>可観測性</td>
                    <td>ログ記録率99%+、欠測率1%未満</td>
                    <td>必須フィールド充足率監視</td>
                    <td><span class="badge badge-success">定義済</span></td>
                </tr>
                <tr>
                    <td>セキュリティ</td>
                    <td>認証失敗率、認可拒否率</td>
                    <td>ログカテゴリ分類で検知</td>
                    <td><span class="badge badge-success">定義済</span></td>
                </tr>
                <tr>
                    <td>コスト</td>
                    <td>月額3,000円以下</td>
                    <td>AWS Cost Explorer</td>
                    <td><span class="badge badge-warning">遅延あり</span></td>
                </tr>
            </table>

            <h3>測定が困難な要求</h3>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">注意</span> コスト達成度の検証遅延</h5>
                    <p>初月の実績把握が15日超後になる可能性</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">注意</span> 可観測性証跡の30日制限</h5>
                    <p>31日超過ログは自動削除され、月次集計で再計算不能の可能性</p>
                    <p class="file-ref">DD-LOG-001:114-116</p>
                </li>
            </ul>
        </section>

        <!-- セクション10: 規約・ドキュメント標準の評価 -->
        <section id="section10">
            <h2>10. 規約・ドキュメント標準の評価 <span class="badge badge-warning">要改善</span></h2>

            <h3>定義済み規約</h3>
            <table>
                <tr>
                    <th>規約</th>
                    <th>ドキュメント</th>
                    <th>網羅性</th>
                </tr>
                <tr>
                    <td>コーディング規約</td>
                    <td>DD-CODE-001</td>
                    <td><span class="badge badge-warning">80%</span></td>
                </tr>
                <tr>
                    <td>レビュー規約</td>
                    <td>DD-REV-001</td>
                    <td><span class="badge badge-success">90%</span></td>
                </tr>
                <tr>
                    <td>ドキュメント更新フロー</td>
                    <td>RQ-DG-001</td>
                    <td><span class="badge badge-success">95%</span></td>
                </tr>
            </table>

            <h3>抜け漏れ項目</h3>
            <ul class="issue-list">
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Major</span> ESLint/tsconfig.json設定の仕様</h5>
                    <p>DD-CODE-001の規約を強制するための具体的な設定が未記載</p>
                    <p>必要: DD-CODE-002として追加</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-warning">Major</span> Next.js App Router固有規約</h5>
                    <p>RSC/Client Component分割ガイドが欠落</p>
                    <p>必要: DD-ARCH-002として追加</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-info">Minor</span> Result型の定義</h5>
                    <p>DD-CODE-001で言及されているが、具体的な型定義がない</p>
                </li>
                <li class="issue-item">
                    <h5><span class="badge badge-info">Minor</span> Brand/Opaque型の標準定義場所</h5>
                    <p>「Brand型で区別する」と記載されているが、型定義の配置場所が未指定</p>
                </li>
            </ul>
        </section>

        <!-- 総合評価と改善ロードマップ -->
        <section id="summary">
            <h2>総合評価と改善ロードマップ</h2>

            <div class="summary-box" style="background: linear-gradient(135deg, #c6f6d5, #9ae6b4); border-left: 4px solid #38a169;">
                <h3>✅ 総合評価: リリース可能 (Release Ready)</h3>
                <p>2026-02-13の改善作業により、AT-GO-001のリリース判定基準を満たす水準に到達</p>
                <div style="display: flex; gap: 20px; margin-top: 15px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 200px;">
                        <strong>完了した改善</strong>
                        <ul style="margin-top: 10px;">
                            <li>テストカバレッジ: 44% → 78%</li>
                            <li>BD-DEP-006（バックアップ設計）追加</li>
                            <li>DD-ARCH-002（Next.js実装ガイド）追加</li>
                            <li>MTTR/外部障害判定アルゴリズム明確化</li>
                        </ul>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <strong>新規追加ドキュメント（16件）</strong>
                        <ul style="margin-top: 10px;">
                            <li>UT-CASE-009〜013（5件）</li>
                            <li>IT-CASE-009〜013（5件）</li>
                            <li>AT-SCN-008/009（2件）</li>
                            <li>BD-DEP-006, DD-ARCH-002等</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3>改善ロードマップ</h3>

            <h4>Phase 1: リリース前必須対応 (P0) - ✅ 完了</h4>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p0">✅</span>
                <span>テストケース追加: UT-CASE-009〜013, IT-CASE-009〜013, AT-SCN-008/009</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p0">✅</span>
                <span>バックアップ・リカバリ設計 (BD-DEP-006) の新規作成</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p0">✅</span>
                <span>外部障害判定アルゴリズムの明確化 (DD-AV-001)</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p0">✅</span>
                <span>段階ロード中の操作制限をRQ-UC-002に明記</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p0">✅</span>
                <span>盛り上がり区間の定義をRQ-GL-015に追加</span>
            </div>

            <h4>Phase 2: リリース後2週間以内 (P1) - ✅ 完了</h4>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p1">✅</span>
                <span>DD-ARCH-002 (Next.js RSC/Client分割ガイド) の新規作成</span>
            </div>
            <div class="action-item">
                <span class="priority-tag priority-p1">P1</span>
                <span>DD-CODE-002 (ESLint/tsconfig.json設定仕様) の新規作成 - 残存</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p1">✅</span>
                <span>バッチ実行制約 (BD-ARCH-001にBAT-006/007追加)</span>
            </div>
            <div class="action-item" style="background: #c6f6d5; text-decoration: line-through;">
                <span class="priority-tag priority-p1">✅</span>
                <span>MTTR判定の単一基準化 (DD-AV-001)</span>
            </div>

            <h4>Phase 3: リリース後1ヶ月以内 (P2)</h4>
            <div class="action-item">
                <span class="priority-tag priority-p2">P2</span>
                <span>全DDLテーブルの個別カラム定義ドキュメント作成</span>
            </div>
            <div class="action-item">
                <span class="priority-tag priority-p2">P2</span>
                <span>可観測性欠測率判定帯域の詳細化</span>
            </div>
            <div class="action-item">
                <span class="priority-tag priority-p2">P2</span>
                <span>恒久対処チケットSLAの明記</span>
            </div>
            <div class="action-item">
                <span class="priority-tag priority-p2">P2</span>
                <span>APIステータス決定表の追加</span>
            </div>
        </section>
    </div>

    <footer>
        <p>Generated by Claude Code Analysis | 2026-02-12</p>
        <p>diopside-v3 Documentation Quality Report</p>
    </footer>
</body>
</html>
