# 影響確認レポート

- 日付: 2026-02-10
- 対象: docs 全198ファイル、.opencode/skills、AGENTS.md
- 判定: 旧案件（CornellNoteWeb）からdiopsideへ全面刷新。
- 上位→下位: RQ更新に伴いBD/DD/UT/IT/ATを全件更新。
- 下位→上位: 設計/テスト更新に伴いRQ整合を再確認済み。
- 決定記録: RDRおよびADRを同一変更で更新済み。

## 追記（主要文書深掘り）
- 対象: `RQ-SC-001` / `BD-ARCH-001` / `DD-API-001` / `AT-PLAN-001`
- 実施: スコープ境界、アーキテクチャ責務、API契約分類、受入判定基準を具体化。
- 影響確認:
  - 要求→設計: `RQ-SC-001` の収集対象定義と `BD-ARCH-001` の責務分割が整合。
  - 設計→詳細: `BD-ARCH-001` の段階ロード方針と `DD-API-001` の配信契約が整合。
  - 設計→受入: `DD-API-001` の契約内容と `AT-PLAN-001` の判定項目が整合。
- 判定: 関連リンクに破綻なし、追加の追従更新は現時点で不要。

## 追記（API詳細・ATシナリオ具体化）
- 対象: `DD-API-002`〜`DD-API-009`, `AT-SCN-001`〜`AT-SCN-005`, `RQ-PP-001`〜`RQ-PP-003`
- 実施: API個別契約、受入手順、判定記録項目を具体化。
- 重複修正: PP配下3文書を目的/価値/KPIで役割分離。

## 追記（プロジェクト制約の重複解消）
- 対象: `RQ-PC-001`〜`RQ-PC-009`
- 実施: 9文書で同一だった制約本文をトピック別に再定義。
- 反映: 個人開発前提の最小コスト運用、AWS固定、AI支援開発前提の品質・リリース条件を明文化。
- 決定記録: `RQ-RDR-011` を新規追加し、要求意味変更の根拠を記録。
- 影響確認:
  - スコープ整合: `RQ-SC-001` の公開データ対象定義と `RQ-PC-003` が整合。
  - 環境整合: `RQ-PC-005` のAWS固定方針と `BD-ARCH-001` のS3/CloudFront構成が整合。
  - 開発整合: `RQ-PC-007`/`RQ-PC-009` のAI開発条件と既存の受入判定運用に矛盾なし。

## 追記（ステークホルダー2者化）
- 対象: `RQ-SH-001`〜`RQ-SH-008`, `RQ-SC-001`, `RQ-RDR-010`, `AT-PLAN-001`
- 実施: 個人開発前提でステークホルダーを「管理者/利用者」の2者へ統合。
- 影響確認:
  - 要求: `RQ-SC-001` に2者限定方針を追加。
  - 決定記録: `RQ-RDR-010` を新規作成し、統合決定の根拠と影響を記録。
  - 受入: `AT-PLAN-001` の実施体制を2者前提へ更新。
- 判定: 旧ロールは `RQ-SH-003` 〜 `RQ-SH-008` を廃止として保持し、リンク整合を維持。

## 追記（UT/IT API単位細分化）
- 対象: `UT-CASE-001`〜`UT-CASE-008`, `IT-CASE-001`〜`IT-CASE-008`, `UT-PLAN-001`, `IT-PLAN-001`
- 実施: DD-API-002〜009に対して1API=1ケースで対応関係を定義。
- 判定: ATシナリオとの接続リンクを追加し、受入判定へのトレースを強化。

## 追記（owner統一と運用・受入本文統一確認）
- 対象: `owner` が `RQ-SH-004/005/006/007/008` の全115文書
- 実施: `owner` を `RQ-SH-001` に一括統一。
- 運用・受入本文確認:
  - 対象: `UT/IT/AT` 文書本文（frontmatter除外）
  - 結果: `RQ-SH-003`〜`RQ-SH-008` の旧ロールID参照は0件（2者表現に矛盾なし）
- 判定: 個人開発の責務集約方針（管理者=RQ-SH-001）と整合。

## 追記（全体統一の最終確認）
- 対象: `docs` 全体（ステークホルダー廃止文書を除く）
- 実施: 旧ロールIDの残存確認と `RQ-RDR-010` の2者表現統一。
- 結果:
  - `owner: RQ-SH-004/005/006/007/008` は0件。
  - 旧ロールID（`RQ-SH-003`〜`RQ-SH-008`）の参照は、廃止文書自身の `id` 定義のみ。
- 判定: 個人開発前提の「管理者/利用者」2者体制へ文書群を統一済み。

## 追記（廃止文書の視認性向上）
- 対象: `RQ-SH-003`〜`RQ-SH-008`
- 実施: 廃止済みステークホルダー6文書のタイトル先頭に `（廃止）` を付与。
- 反映: 各文書の `version` を `1.0.3` へ更新し、変更履歴を追記。

## 追記（廃止文書の削除）
- 対象: `RQ-SH-003`〜`RQ-SH-008`
- 実施: 個人開発の2者体制へ完全統一するため、廃止済みステークホルダー6文書を削除。
- 影響確認:
  - `docs` 全体で `RQ-SH-003`〜`RQ-SH-008` の参照は0件。
  - 有効なステークホルダー文書は `RQ-SH-001` と `RQ-SH-002` のみ。
- 判定: 2者前提の文書構成として整合。

## 追記（AT API逆引き整備）
- 対象: `AT-SCN-001`〜`AT-SCN-005`, `AT-RPT-001`, `AT-GO-001`, `AT-PLAN-001`
- 実施: 各ATシナリオに対応DD-API番号を明示し、受入記録からAPI単位で逆引き可能な運用を追加。
- 判定: `AT-SCN -> AT-RPT(API逆引き) -> AT-GO` の判定導線を確立。

## 追記（AT-RPT記入例テンプレ化）
- 対象: `AT-RPT-001`
- 実施: シナリオ結果サマリとAPI単位判定にPass/Fail記入例を追加し、入力用テンプレート表を併記。
- 判定: 受入結果をAPI単位で記録・監査できる粒度に統一。

## 追記（AT-GO転記強化）
- 対象: `AT-GO-001`
- 実施: `AT-RPT-001` から転記するAPI判定表と判定サマリ記入例を追加。
- 判定: 判定会議でシナリオ単位/ API単位の双方を同時確認できる体裁に統一。

## 追記（用語リンク統一）
- 対象: `docs` 全体（本文）
- 実施: 用語集 `RQ-GL-001`〜`RQ-GL-012` の語彙出現箇所を Obsidian 形式のリンク（`[[RQ-GL-xxx|用語]]`）へ統一。
- 除外: frontmatter、既存Wikiリンク、インラインコード、Mermaid/コードブロック。
- 検証: `python3 .opencode/skills/obsidian-doc-check/scripts/validate_vault.py --docs-root docs --report reports/doc_check.md` 実行済み（issues/broken_links=0）。

## 追記（用語自動リンク化のスクリプト運用追加）
- 対象: `.opencode/skills/obsidian-doc-new/scripts/auto_link_glossary.py`, `.opencode/skills/**/SKILL.md`, `RQ-DG-001`, `BD-CM-001`
- 実施:
  - 用語集 `RQ-GL-*` を参照して本文語彙を `[[RQ-GL-xxx|用語]]` へ自動変換するスクリプトを追加。
  - `doc-*` / `docops-orchestrator` / `obsidian-doc-*` / `skill-maintainer` の手順に、`auto_link_glossary.py` 実行を追加。
  - 文書運用ガイド（`RQ-DG-001`）と構成管理（`BD-CM-001`）に標準実行順（自動リンク化→整合チェック）を反映。
- 検証:
  - `python3 .opencode/skills/obsidian-doc-new/scripts/auto_link_glossary.py "docs/1.要求(RQ)/81.ドキュメント更新フローと受け入れ基準(DG)/RQ-DG-001.md" "docs/2.基本設計(BD)/52.構成管理/BD-CM-001.md"`
  - `python3 .opencode/skills/obsidian-doc-check/scripts/validate_vault.py --docs-root docs --report reports/doc_check.md`

## 追記（ドメインモデル具体化）
- 対象: `RQ-DM-001`〜`RQ-DM-007`, `RQ-RDR-013`
- 実施:
  - 7件のドメインモデルを雛形記述から具体化し、主キー/外部キー/論理識別子、主要属性、関連、整合条件を明文化。
  - `RQ-RDR-013` を新規追加し、意味変更の決定根拠と影響範囲を要求決定記録として残した。
- 影響確認:
  - 要求→設計: `RQ-DM-*` の run追跡要件と `DD-API-002/003/008` の run契約が整合。
  - 要求→データ設計: `RQ-DM-*` の識別子方針と `BD-DATA-001` / `BD-ERD-001` の方向性に矛盾なし。

## 追記（用語定義の具体化）
- 対象: `RQ-GL-001`〜`RQ-GL-012`, `RQ-RDR-012`
- 実施: 汎用文（「diopside文脈で利用する用語」）を、収集対象判定・配信契約・運用手順が読める具体定義へ更新。
- 決定記録: `RQ-RDR-012` を新規作成し、用語意味変更の理由と影響を記録。
- 影響確認:
  - 要求整合: `RQ-SC-001` の収集対象定義と `RQ-GL-003/004` の判定条件が整合。
  - 設計整合: `DD-API-001` の配信契約と `RQ-GL-007/008/009/010` の定義が整合。
  - 運用整合: `AT-PLAN-001` の運用判定導線と `RQ-GL-011/012` の定義が整合。

## 追記（ステークホルダー表現の残存修正）
- 対象: `RQ-UC-001`〜`RQ-UC-008`, `RQ-SC-001`, `RQ-PP-002`, `RQ-PC-004`, `RQ-PC-008`, `BD-ARCH-001`, `DD-API-003`, `DD-API-009`, `AT-SCN-004`
- 実施: ステークホルダー2者（管理者/利用者）に存在しない主体表現（`収集担当者`/`運用担当者`/`運用者`）を `管理者` または `利用者` へ統一。
- 影響確認:
  - ユースケース: 8文書の開始主体をユースケース目的に合わせて明確化（管理者起点3件、利用者起点5件）。
  - 設計/受入: `BD-ARCH-001` のMermaidアクター名、`DD-API-*` と `AT-SCN-004` の主体・権限表現を管理者へ統一。
  - 要求制約: `RQ-PC-008` の権限名を `管理者権限` へ統一。
- 判定: `docs` 全体で `収集担当者` / `運用担当者` / `利用者または運用者` の残存参照は0件。

## 追記（用語英名term_enの追加）
- 対象: `RQ-GL-001`〜`RQ-GL-012`, `RQ-RDR-013`, `RQ-DG-001`, `BD-CM-001`, `.opencode/skills/**`
- 実施: 用語文書に `term_en`（ASCII `snake_case`）を追加し、`## 定義` に英名を併記。
- 決定記録: `RQ-RDR-013` を新規作成し、機械可読な英名運用の採用理由を記録。
- スキル更新: `docops-orchestrator` / `obsidian-doc-*` / `skill-maintainer` / `doc-rq-gl` に英名運用ルールを反映。
- 影響確認:
  - 要求整合: `RQ-DG-001` の受入基準へ `term_en` 必須化を反映。
  - 設計整合: `BD-CM-001` の構成管理方針へ英名運用を反映。
  - 自動化整合: `auto_link_glossary.py` が `title` と `term_en` の両方をリンク対象として処理可能。

## 追記（用語定義の表形式統一）
- 対象: `RQ-GL-001`〜`RQ-GL-012`, `RQ-DG-001`, `.opencode/skills/doc-rq-gl/*`
- 実施: 用語文書 `## 定義` を表形式（`用語ID/用語名/英名/定義/判定条件/適用範囲`）へ統一し、可読性を向上。
- スキル更新: `doc-rq-gl` の `SKILL.md` と `TEMPLATE.md` に表形式標準を反映。
- 影響確認:
  - 要求整合: 既存の用語意味は不変で、表現形式のみ統一。
  - 運用整合: `RQ-DG-001` の受入基準へ表形式要件を追加。

## 追記（ドメインモデルの業務記述統一）
- 対象: `RQ-DM-001`〜`RQ-DM-007`, `RQ-RDR-014`
- 実施:
  - ドメインモデルを実装寄り記述から業務記述へ書き換え、各文書を「モデルの目的/要素・属性/制約・業務ルール/関連」で統一。
  - 主キー/外部キー/論理識別子、監査属性の記述を削除し、日本語での解説へ置換。
  - `RQ-RDR-014` を追加し、要求段階ではドメイン記述を正本とする決定を記録。
- 影響確認:
  - 要求→設計: `RQ-DM-*` の業務制約を `BD-DATA-001` / `BD-ERD-001` の詳細化前提として維持可能。
  - 要求→運用: 各モデルでどの [[RQ-GL-002|収集ジョブ]] 結果を前提にするかを業務文脈で説明可能。

## 追記（画面構成起点の用語追加）
- 対象: `RQ-GL-013`, `RQ-GL-014`, `RQ-DM-004`, `RQ-DM-007`, `RQ-RDR-015`
- 実施:
  - 画面構成（タグカテゴリ・検索フィルタ）を根拠に、`タグ種別` と `検索条件` の用語を新規追加。
  - DMは業務概念に限定し、種別集合と条件規則の正本参照先を用語文書へ移した。
  - 要求決定記録 `RQ-RDR-015` を追加し、GL中心運用への整理方針を記録。
- 影響確認:
  - 要求→設計: `BD-UI-002` の画面要素と `RQ-GL-013/014` の用語定義が対応。
  - 要求→DM: `RQ-DM-004/007` が語彙正本をGL参照する構成となり、責務分離を維持。

## 追記（ドメイン参照リンクの統一）
- 対象: `RQ-DM-001`〜`RQ-DM-007`, `AT-SCN-001`, `AT-SCN-003`, `RQ-RDR-015`, `.opencode/skills/doc-rq-dm/*`, `.opencode/skills/doc-at-scn/*`, `obsidian-doc-*`, `docops-orchestrator`, `skill-maintainer`, `RQ-DG-001`
- 実施: ドメインモデル本文の関連節にある文書ID参照（例: `` `RQ-DM-002` ``）を Obsidianリンク（[[RQ-DM-002]]）へ統一。
- 決定記録: `RQ-RDR-015` を新規作成し、本文中の文書ID参照をObsidianリンクで統一する方針を記録。
- スキル更新: DM専用スキルおよび共通スキルへ「本文中の文書ID参照はObsidianリンクで記載」の規約を追記。
- 影響確認:
  - 文書可読性: 参照先へ直接遷移できるため、モデル間トレースが容易。
  - 運用整合: `RQ-DG-001` の受入基準へ文書IDリンク統一ルールを追加。

## 追記（タグ種別定義の具体化）
- 対象: `RQ-GL-013`, `RQ-RDR-015`, `RQ-DG-001`, `.opencode/skills/doc-rq-gl/*`
- 実施:
  - `RQ-GL-013` に `タグ種別/説明/付与ルール` の表を追加し、種別語彙の運用判断を明文化。
  - 参考ルール（大分類/出演者名/ユニット名/ゲーム名/ゲームジャンル/シリーズ名/コンテンツ名/コンテンツジャンル/企画名/企画大分類/企画ジャンル/配信ジャンル/動画形式）を反映。
  - 既存運用の `チャンネル` も同表へ保持し、必須・単一選択ルールとの整合を維持。
- 決定記録: `RQ-RDR-015` を更新し、タグ種別は付与ルール表を正本とする方針を追記。
- スキル更新: `doc-rq-gl` の `SKILL.md`/`TEMPLATE.md` にタクソノミ系用語表の基準を追記。
- 影響確認:
  - 要求整合: `RQ-DM-004` の種別解釈が `RQ-GL-013` を正本として一意化。
  - 運用整合: `RQ-DG-001` の受入基準へタクソノミ表記要件を追加。

## 追記（ユースケース記述の具体化）
- 対象: `RQ-UC-001`〜`RQ-UC-008`, `RQ-RDR-016`, `.opencode/skills/doc-rq-uc/*`
- 実施:
  - UC文書の定型テンプレート文を廃止し、ユースケースごとの主体・処理・結果が追えるフローへ書き換え。
  - `代替/例外フロー` をUC固有の失敗条件へ分解（入力不備、取得失敗、競合、0件等）。
  - `RQ-RDR-016` を新規作成し、UC具体化の決定と影響を記録。
- スキル更新: `doc-rq-uc` にテンプレート禁止と具体記述基準（固有フロー、固有例外）を追記。
- 影響確認:
  - 要求整合: 管理者系UC（001/007/008）と利用者系UC（002〜006）の責務分離を明確化。
  - 運用整合: `RQ-UC-007` と `RQ-UC-008` の調査→再実行導線が要求上で接続。
