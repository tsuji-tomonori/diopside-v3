# docs分析レポート（2026-02-13）

## 0. 実施概要
- 対象: `docs/**/*.md`（359件）
- 実施日: 2026-02-13
- 実施コマンド:
  - `task docs:check`（結果: `issues: 0`, `broken_links: 0`, `nonlinked_doc_ids: 0`）
  - `RQ-RTM-001/002` のトレース表確認
- 補足:
  - フェーズ内訳: `RQ 152 / BD 69 / DD 64 / UT 30 / IT 24 / AT 20`
  - ステータス内訳: `下書き 358 / 廃止 1 / 承認 0`

## 1. 観点ごとの対象資料洗い出し
| 観点 | 主対象資料 |
| --- | --- |
| 要求に矛盾がないか | `docs/1.要求(RQ)/51.機能要求(FR)/*`, `docs/1.要求(RQ)/61.非機能要求(NFR)/*`, `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-001.md` |
| 全要求に答える基本設計か | `docs/2.基本設計(BD)/21.アーキテクチャ概要/BD-ARCH-001.md`, `docs/2.基本設計(BD)/41.API/BD-API-001.md`, `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-002.md` |
| 基本設計に矛盾がないか | `docs/2.基本設計(BD)/**/*.md`, `docs/2.基本設計(BD)/11.アーキテクチャ決定記録(ADR)/*.md` |
| 詳細設計が基本設計準拠か | `docs/3.詳細設計(DD)/**/*.md`, `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-002.md` |
| FE/BE/Batch/Infraが迷いなく実装可能か | `docs/3.詳細設計(DD)/11.コンポーネント/DD-COMP-001.md`, `docs/3.詳細設計(DD)/31.API/*.md`, `docs/2.基本設計(BD)/21.アーキテクチャ概要/BD-ARCH-001.md`, `docs/3.詳細設計(DD)/13.インフラ詳細(INF)/*.md` |
| 設計の曖昧さがないか | `docs/1.要求(RQ)/81.ドキュメント更新フローと受け入れ基準(DG)/RQ-DG-001.md`, `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-001.md` |
| UT/IT/AT反映性 | `docs/2.基本設計(BD)/71.テスト戦略/BD-TST-001.md`, `docs/4.単体テスト(UT)/11.単体テスト計画/*.md`, `docs/5.結合テスト(IT)/11.結合テスト計画/IT-PLAN-001.md`, `docs/6.受入テスト(AT)/11.受入テスト計画/AT-PLAN-001.md`, `AT-GO-001`, `AT-RPT-001` |
| 運用が適切か | `AT-OPS-001`, `AT-RUN-001`, `AT-REL-001`, `AT-SLO-001`, `AT-DR-001` |
| 非機能要求順守 | `RQ-AV-001`, `RQ-PS-001`, `RQ-SEC-001`, `RQ-OBY-001`, `RQ-COST-001`, `RQ-UX-*` と対応BD/DD |
| 非機能要件/コーディング規約/ドキュメント規約の抜け漏れ | `DD-CODE-001`, `DD-REV-001`, `RQ-DG-001`, `RQ-DEV-001`, `RQ-DEV-002` |

## 2. 観点ごとの確認結果
| 観点 | 判定 | 根拠 |
| --- | --- | --- |
| 要求の矛盾 | 要改善 | `AT-SCN-009` が `RQ-FR-009` を「タグ廃止・統合」として扱うが、`RQ-FR-009` 本文は「タグ条件絞り込み」要求で意味不一致。 |
| 全要求に答えるBD | 概ね満たす | `RQ-RTM-002` で FR/NFR から BD/DD への経路は成立。 |
| BD内整合 | 概ね良好 | `BD-ARCH-001`/`BD-API-001`/`BD-TST-001` の責務境界は明確。 |
| DDのBD準拠 | 概ね満たす | 多くのDDが `up` でBDに接続。 |
| 実装可能性（FE/BE/Batch/INF） | 要改善 | `DD-IAC-001` が抽象的で実装入力（モジュール一覧・変数・出力）が不足。 |
| 設計曖昧さ | 要改善 | `RQ-DG-001` で求めるRTM直接検証リンク要件と `RQ-RTM-001` の実データにギャップ。 |
| UT/IT/AT反映性 | 要改善 | `UT-PLAN-005` と `IT-PLAN-001` は `DD-API-002..009` 前提のまま。 `DD-API-010..015` との整合不足。 |
| 運用適切性 | 概ね良好 | `AT-OPS-001`, `AT-RUN-001` は運用手順が具体化。 |
| 非機能要求順守 | 概ね良好 | NFRは閾値が明記され、設計・運用文書へ接続。 |
| 規約抜け漏れ | 要改善 | 全文書 `status: 下書き`（承認0件）で、承認ゲートが機能していない。 |

## 3. 資料単位レビュー（良い点/悪い点）
| 資料 | 良い点 | 悪い点・リスク | 改善案 |
| --- | --- | --- | --- |
| `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-001.md` | FR/NFRを設計と検証へ一望できる。 | FR25件中10件で検証列が `-`。FR25件中18件でAT直接リンクなし。 | `RQ-DG-001` の運用どおり、主要 `UT-CASE`/`IT-CASE`/`AT-SCN` を直接記載。 |
| `docs/1.要求(RQ)/71.要求トレーサビリティマトリックス(RTM)/RQ-RTM-002.md` | 設計起点の追跡とテスト層判定を持つ。 | 経路判定PASSでも、計画書側の対象未更新を隠しやすい。 | 判定に「計画書対象範囲一致」チェック列を追加。 |
| `docs/1.要求(RQ)/51.機能要求(FR)/03.タグ管理(TAG)/RQ-FR-009.md` | SnowCard形式で受入基準が具体。 | `AT-SCN-009` 側で意味が別要求として扱われている。 | `AT-SCN-009` の対応要求を `RQ-FR-005` 中心へ修正、必要なら新FR追加。 |
| `docs/1.要求(RQ)/61.非機能要求(NFR)/06.DevOps(DEV)/RQ-DEV-002.md` | AI運用要件の統制観点が明確。 | `RQ-RTM-001` で検証リンクが `-`。受入テストが実質未定義。 | `AT-SCN` または `UT-CASE(DOC/OPS)` を追加して検証経路を確定。 |
| `docs/2.基本設計(BD)/21.アーキテクチャ概要/BD-ARCH-001.md` | FE/BE/Batch責務、バッチ制約、同時実行制御が明確。 | BAT-006の詳細はあるが、対応UT/ITケース紐付けが弱い。 | BAT単位のITケース（成功/partial/retry）を増設。 |
| `docs/2.基本設計(BD)/41.API/BD-API-001.md` | API一覧と正本ルールが明確。 | 将来拡張契約と現行MVP契約の境界がテスト計画側に反映されていない。 | IT/AT計画に「MVP対象API」「予約API」を明示分離。 |
| `docs/2.基本設計(BD)/71.テスト戦略/BD-TST-001.md` | UT/IT/AT + INFレイヤの責務が整理されている。 | 下位計画書の更新追従が遅れ、戦略と実体が乖離。 | `UT-PLAN-005`, `IT-PLAN-001`, `AT-PLAN-001` を同日更新で同期。 |
| `docs/3.詳細設計(DD)/31.API/DD-API-006.md` | 「検索はクライアント実行」の境界が明確。 | IT/UT計画がAPIケースとして扱っており、名称上の誤解余地。 | 計画書側で「契約テスト（API呼出なし）」と明記。 |
| `docs/3.詳細設計(DD)/13.インフラ詳細(INF)/DD-IAC-001.md` | IaC分離方針は提示。 | 実装可能な粒度不足（モジュールI/O、ディレクトリ、入出力例なし）。 | モジュール一覧、変数表、output、依存図、実行コマンドを追記。 |
| `docs/4.単体テスト(UT)/11.単体テスト計画/UT-PLAN-005.md` | API単位のUT運用を定義。 | 対象が `DD-API-002..009` で停止し、`DD-API-010..015` 未包含。 | ケース一覧と完了条件を最新API群へ更新。 |
| `docs/5.結合テスト(IT)/11.結合テスト計画/IT-PLAN-001.md` | API契約検証の観点は妥当。 | ケースが1〜8固定。新API（010〜015）未反映。 | IT-CASE追加分を計画へ正式編入。 |
| `docs/6.受入テスト(AT)/11.受入テスト計画/AT-PLAN-001.md` | 受入判定基準が具体。 | 受入シナリオ一覧に `AT-SCN-006/008/009` が未記載。 | 受入対象・判定基準・記録先に3シナリオを追加。 |
| `docs/6.受入テスト(AT)/52.リリース判定/AT-GO-001.md` | Go/No-Goの入力項目が整理。 | 必須シナリオが `AT-SCN-001..005` 固定、API判定も `DD-API-002..009` 固定。 | 判定表を `AT-SCN-001..009` / `DD-API-002..015` へ拡張。 |
| `docs/6.受入テスト(AT)/61.受入テスト報告/AT-RPT-001.md` | API逆引き記録の考え方は良い。 | 新シナリオ `AT-SCN-008/009` がサマリ未統合。 | サマリ表・テンプレートを最新体系へ更新。 |
| `docs/6.受入テスト(AT)/21.受入テストシナリオ/AT-SCN-009.md` | タグ運用シナリオ自体は具体的。 | 対応要求に `RQ-FR-009`（タグ絞り込み）を誤解釈で接続。 | 対応要求を再整理し、要求IDの意味整合を修正。 |
| `docs/1.要求(RQ)/81.ドキュメント更新フローと受け入れ基準(DG)/RQ-DG-001.md` | 文書運用ゲートが明確。 | 運用ルール（直接検証リンク必須）と実体（RTM）が不一致。 | `task docs:trace` 後に未充足ルールをFail扱いにするチェック追加。 |

## 4. 最終サマリ
### 4.1 総評
- 文書構造整合（リンク・frontmatter）は非常に良好。
- 要求→設計の骨格は成立しており、BD/DDの責務分離も進んでいる。
- ただし、テスト計画とリリース判定文書が最新要求・API追加に追随しきれておらず、品質ゲート文書が実態より狭い。

### 4.2 重要課題（優先度順）
1. `AT-SCN-009` と `RQ-FR-009` の意味矛盾を解消する。
2. `UT-PLAN-005` / `IT-PLAN-001` / `AT-PLAN-001` / `AT-GO-001` / `AT-RPT-001` を最新API・シナリオ体系へ更新する。
3. `RQ-RTM-001` の検証列 `-` を解消し、`RQ-DG-001` のルールと一致させる。
4. `DD-IAC-001` など実装粒度不足文書を補強し、INF実装の迷いをなくす。
5. 承認運用（`status: 承認`）をGo/No-Go前提に組み込み、下書きのままリリースしない。

### 4.3 すぐ着手すべき修正パッケージ
- パッケージA（整合修正）: `AT-SCN-009`, `RQ-RTM-001`, `RQ-RTM-002`
- パッケージB（テスト体系更新）: `UT-PLAN-005`, `IT-PLAN-001`, `AT-PLAN-001`, `AT-GO-001`, `AT-RPT-001`
- パッケージC（INF具体化）: `DD-IAC-001` + 関連UT/ITケース
